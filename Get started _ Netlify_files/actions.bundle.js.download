"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8107],{21112:(_t,z,t)=>{t.d(z,{FW:()=>S,d2:()=>p,o3:()=>O,rI:()=>E,so:()=>T});var l=t(24761),F=t(74479),m=t(37702),P=t(2799);const D=(0,l.P)("accountCommitters"),T=(0,l.x)("accountCommitters",D);function O(a,s){const r=a.accountCommitters.getIn(["pages",s,"ids"]);return r==null?void 0:r.map(c=>a.accountCommitters.getIn(["entities",c]))}function S(a){const r=(0,m.qC)(a)?{}:{billingPeriod:"current"};return(0,P.p5)((c,d,n)=>n.accountCommitters(a.get("id"),r).then(e=>{c(D.accountCommittersSuccess(a.get("slug"),e.data))}))}function p(a,s,r){return(0,P.p5)((c,d,n)=>n.createCommitter(a.get("id"),s,r).then(e=>{c(S(a))}))}function E(a,s,r,c,d){return(0,P.p5)((n,e,o)=>o.updateCommitter(s.get("id"),r,c,d).then(i=>{F.iN.appCommitterMerged({accountId:s.get("id")||"",committerId:r,memberId:c,type:c?"merge":"unmerge",userId:a}),n(S(s))}))}},78091:(_t,z,t)=>{t.d(z,{Ah:()=>K,Kw:()=>e,Lj:()=>u,O_:()=>v,PM:()=>d,SM:()=>o,ad:()=>n,c_:()=>f,el:()=>i,hS:()=>U,j_:()=>_});var l=t(90046),F=t.n(l),m=t(19271),P=t(18643),D=t(24761),T=t(37421),O=t(10583),S=t(2799),p=t(4310);const E=(0,D.P)("accountMembers"),a="INVITE_CLEAR_FAILURES",s="INVITE_FAILURE",r=(0,P.Z)(a),c=(0,P.Z)(s),d=(0,D.x)("accountMembers",E,{handler:(M,W)=>{switch(W.type){case a:return M.setIn(["inviteErrors"],(0,l.List)());case s:{const j=M.get("inviteErrors")||(0,l.List)();return M.setIn(["inviteErrors"],j.push(W.payload))}default:return null}}});function n(M,W){const j=M.accountMembers.getIn(["pages",W,"ids"]);return j&&j.map(ct=>M.accountMembers.getIn(["entities",ct])).sort((ct,ot)=>{const Et=$=>$.get("pending")===!0;if(Et(ct)&&!Et(ot))return 1;if(!Et(ct)&&Et(ot))return-1;const Y=new Date(ct.get("updated_at")),at=new Date(ot.get("updated_at"));return Y<at?1:-1})}function e(M,W){return M.accountMembers.getIn(["entities",W])}function o(M){return M.accountMembers.getIn(["inviteErrors"])}function i(M){return(0,S.p5)((W,j,ct)=>ct.accountMembers(M.get("slug")).then(ot=>W(E.accountMembersSuccess(M.get("slug"),ot.data,ot.pagination))))}function u(M,W){return(0,S.p5)((j,ct,ot)=>ot.accountMember(M.get("slug"),W).then(Et=>j(E.accountMemberSuccess(Et.data))))}function _(M,{emails:W,role:j,site_ids:ct,site_access:ot,build_id:Et}){return(0,S.p5)((Y,at,$)=>(Y(r()),Promise.all(W.map(x=>$.inviteAccountMember(M.get("slug"),{email:x,role:j,site_ids:ct,site_access:ot,build_id:Et}).catch(rt=>{Y(c((0,l.fromJS)({email:x,error:rt.message})))}))).finally(()=>{Y(i(M)),Y((0,O.Mx)(M.get("slug"))),Y((0,m.VF)((0,T.l_)(M,"members")))})))}function f(M,W){return(0,S.p5)((j,ct,ot)=>ot.inviteAccountMember(M.get("slug"),{email:W.get("email"),role:W.get("role"),site_ids:W.get("site_ids"),site_access:W.get("site_access"),build_id:W.get("build_id")}).finally(()=>{j(i(M)),j((0,O.Mx)(M.get("slug")))}))}function v(){return r()}function K(M,W){return(0,S.p5)((j,ct,ot)=>ot.removeAccountMember(M.get("slug"),W.get("id")).then(()=>{(0,p.HF)(ct()).get("id")===W.get("id")?j((0,O.UU)(M)):j(i(M)),j((0,O.Mx)(M.get("slug")))}))}function U(M,W,{role:j,site_access:ct,site_ids:ot}){return(0,S.p5)((Et,Y,at)=>at.updateAccountMember(M.get("slug"),W.get("id"),{role:j,site_access:ct,site_ids:ot}).then($=>Et(i(M))))}},21340:(_t,z,t)=>{t.d(z,{L6:()=>D,TL:()=>P,V8:()=>T});var l=t(24761),F=t(2799);const m=(0,l.P)("accountReceipts"),P=(0,l.x)("accountReceipts",m);function D(O,S){const p=S&&O.accountReceipts.getIn(["pages",S.get("slug"),"ids"]);return p&&p.map(E=>O.accountReceipts.getIn(["entities",E])).filter(E=>E.get("html_stored"))}function T(O){return(0,F.p5)((S,p,E)=>E.accountReceipts(O.get("slug")).then(a=>S(m.accountReceiptsSuccess(O.get("slug"),a.data,a.pagination))))}},65485:(_t,z,t)=>{t.d(z,{$K:()=>e,KB:()=>n,Q_:()=>r,Vx:()=>s,ag:()=>u,iX:()=>i,ol:()=>o});var l=t(90046),F=t.n(l),m=t(18643),P=t(24761),D=t(78091),T=t(2799);const O=(0,P.P)("accountReviewers"),S="REVIEWER_SUCCESS",p="REVIEWER_FAILURE",E=(0,m.Z)(S),a=(0,m.Z)(p);function s(_){const f=_.get("slug");return(0,T.p5)((v,K,U)=>(v(O.accountReviewersRequest(f)),U.accountReviewers(f).then(M=>{v(O.accountReviewersSuccess(f,M.data,M.pagination)),v(E({}))})))}const r=(0,P.x)("accountReviewers",O,{handler:(_,f)=>{switch(f.type){case S:return _.setIn(["error"],(0,l.fromJS)(f.payload));case p:return _.setIn(["error"],(0,l.fromJS)(f.payload));default:return null}}});function c(_,f){return _.accountReviewers.getIn(["entities",f])}function d(_,f){const v=_.get("state"),K=f.get("state");return v===K?new Date(f.get("created_at")).getTime()-new Date(_.get("created_at")).getTime():K==="pending"?1:v==="pending"?-1:0}function n(_,f){const v=_.accountReviewers.getIn(["pages",f,"ids"]);return v&&v.map(K=>_.accountReviewers.getIn(["entities",K])).sort(d)}function e(_){return _.accountReviewers.getIn(["error"])}function o(_,f,{state:v,site_access:K="all"}){const U=f.get("id");return(0,T.p5)((M,W,j)=>j.updateAccountReviewer(_.get("slug"),U,{state:v,site_access:K}).then(()=>M(s(_))).catch(ct=>M(a({reviewerId:U,error:ct}))))}function i(_,f,{role:v="Collaborator"}){const K=f.get("id");return(0,T.p5)((U,M,W)=>W.promoteAccountReviewer(_.get("slug"),K,{role:v}).then(()=>{U((0,D.el)(_)),U(s(_))}).catch(j=>U(a({reviewerId:K,error:j}))))}function u(_,f){const v=f.get("id");return(0,T.p5)((K,U,M)=>M.removeAccountReviewer(_.get("slug"),v).then(()=>{K(s(_))}).catch(W=>K(a({reviewerId:v,error:W}))))}},10583:(_t,z,t)=>{t.d(z,{E_:()=>rt,Gj:()=>wt,Ko:()=>Z,L3:()=>Dt,MI:()=>St,Mx:()=>ut,Tq:()=>g,UU:()=>b,Wq:()=>Rt,_Z:()=>N,bT:()=>L,bk:()=>gt,cM:()=>Ot,i6:()=>y,my:()=>Mt,nP:()=>Zt,nw:()=>V,o1:()=>et,ok:()=>mt,qL:()=>xt,rp:()=>vt,s5:()=>pt,sG:()=>st,tm:()=>h,uW:()=>Yt,vP:()=>q,yj:()=>x});var l=t(90046),F=t.n(l),m=t(19271),P=t(18643),D=t(24761),T=t(74479),O=t(1800),S=t(23229),p=t(76352),E=t(53174),a=t(41862),s=t(93967),r=t(2799),c=t(61712),d=t(11632),n=t(43455);const e="ACCOUNT_TYPES_SUCCESS",o="ACCOUNT_COMPLIANCE_SUCCESS",i="ACCOUNT_UPGRADE_PRO",u="ACCOUNT_UPGRADE_BUSINESS",_="SET_SELECTED_ACCOUNT",f="SET_REQUESTED_ACCOUNT_TYPE",v="ACCOUNT_BANDWIDTH_USAGE_SUCCESS",K="ACCOUNT_BANDWIDTH_USAGE_PER_DOMAIN_SUCCESS",U="ACCOUNT_BUILD_USAGE_SUCCESS",M="ACCOUNT_CREATOR_SUCCESS",W=(0,D.P)("accounts"),j=(0,P.Z)(e,I=>I),ct=(0,P.Z)(o,(I,C)=>({id:I,compliance:C})),ot=(0,P.Z)(v,(I,C)=>({id:I.get("id"),bandwidth:C})),Et=(0,P.Z)(K,(I,C)=>({id:I,bandwidth:C})),Y=(0,P.Z)(U,(I,C)=>({id:I.get("id"),status:C})),at=(0,P.Z)(M,(I,C)=>({id:I.get("id"),creator:C}));function $(I){return(0,r.p5)((C,J,lt)=>lt.accountBandwidth(I.get("slug")).then(dt=>{C(ot(I,dt.data))}))}function x(I,C){return(0,r.p5)((J,lt,dt)=>dt.accountBandwidthRanking(I,C).then(ft=>{J(Et(I,ft.data))}))}function rt(I){return(0,r.p5)((C,J,lt)=>{const dt=I&&I.get("slug");return lt.getAccountCreator(dt).then(ft=>{C(at(I,ft.data))})})}function L(I,C){return I.accounts.get(X(C,"creator"))}function B(I){return(0,r.p5)((C,J,lt)=>lt.accountBuildStatus(I.get("slug")).then(dt=>{C(Y(I,dt.data))}))}function tt(I){return(C,J)=>{C($(I)),C(B(I))}}function q(){return(0,r.p5)((I,C,J)=>J.accounts().then(lt=>{I(W.accountsSuccess("accounts",lt.data,lt.pagination)),S.Z.setContext("accounts",lt.data.map(dt=>(0,O.M)(dt)))}))}function ut(I){return(0,r.p5)((C,J,lt)=>lt.account(I).then(dt=>C(W.accountSuccess(dt.data))).then(dt=>{var ft;const Lt=(ft=dt==null?void 0:dt.payload)==null?void 0:ft.id;return C(Q({accountId:Lt,slug:I})),dt}).catch(dt=>C(W.accountFailure(I,dt))))}function y(I){return(C,J)=>{C(ut(I.get("slug"))).then(()=>{C(tt(I))})}}function Z(){return(0,r.p5)((I,C,J)=>J.accountTypes().then(lt=>I(j(lt.data))))}function Q({accountId:I,slug:C}){return(0,r.p5)((J,lt,dt)=>dt.accountCompliance(C).then(ft=>J(ct(I,ft.data))))}function et(I){return(0,r.p5)((C,J,lt)=>lt.createAccount(I).then(({data:dt})=>{C(W.accountSuccess(dt)),I.transferSite&&C((0,c.GQ)(I.transferSite,(0,l.Map)(dt))),C(q()),C((0,m.VF)(`/teams/${dt.slug}`)),C((0,c.KZ)()),C((0,d.L9)({event:"subscription_created",category:"subscription",label:`Team plan ${dt.type_name}`}))}))}function st(I,C){return(0,r.p5)((J,lt,dt)=>dt.updateAccount(I.get("id"),C).then(({data:ft})=>{const{logo:Lt}=C;if(Lt!==void 0&&dt.updateAccountLogo(I.get("id"),Lt).catch(Kt=>new s.Z(Kt)),J((0,c.Go)()),J(W.accountSuccess(ft)),I.get("type_slug")===E.iK&&ft.type_slug===E.d0&&ft.type_id===C.type_id){const Kt=(0,p.St)("upgradePro")?"www":"app",Jt=(0,p.St)("gaID")?(0,p.St)("gaID"):"";T.iN.appFlowUpgradePro({category:"flow",label:"Team upgraded to Pro",accountId:I.get("id"),gaID:Jt||"",source:Kt,trialRequested:!!C.free_trial}),(0,p.St)("upgradePro")&&(0,p.lD)("upgradePro")}if((I.get("type_slug")===E.iK||I.get("type_slug").match(/pro/))&&ft.type_slug===E.HX&&ft.type_id===C.type_id){const Kt=(0,p.St)("upgradeBusiness")?"www":"app",Jt=(0,p.St)("gaID")?(0,p.St)("gaID"):"";T.iN.appFlowUpgradeBusiness({category:"flow",label:"Team upgraded to Business",accountId:I.get("id"),gaID:Jt||"",source:Kt}),(0,p.St)("upgradeBusiness")&&(0,p.lD)("upgradeBusiness")}const Nt=I.get("slug"),{slug:ht}=ft;Nt!==ht&&J((0,n.Ee)(document.location.pathname.replace(`/teams/${Nt}/`,`/teams/${ht}/`)))}))}function mt(I,C){return(0,r.p5)((J,lt,dt)=>dt.updateAccount(I.get("id"),C).then(()=>{const{logo:ft}=C;if(ft!==void 0)return dt.updateAccountLogo(I.get("id"),ft).then(()=>{J(ut(I.get("slug")))}).catch(Lt=>new s.Z(Lt))}))}function pt(I){return(0,r.p5)((C,J,lt)=>lt.deleteAccountLogo(I.get("id")).then(()=>{C(ut(I.get("slug")))}).catch(dt=>new s.Z(dt)))}function h(I){return T.iN.appAccountDelete({accountId:I==null?void 0:I.get("id"),accountSlug:I==null?void 0:I.get("slug")}),(0,r.p5)((C,J,lt)=>lt.deleteAccount(I.get("id")).then(dt=>C(b(I))))}function b(I){return(C,J)=>{C((0,c.Go)()),C(k()),C(q()).then(()=>C((0,n.Ee)("/")))}}function V(I){return(0,p.D$)("nf-team",I),{type:_,slug:I}}function k(){return V(null)}function g(I,C=!1,J=!1){return{type:f,payload:{accountTypeRequested:I,isNewAccountTypeRequested:C,isTrialAccountTypeRequested:J}}}function N(){return g(null)}const X=(I,C)=>[I.get?I.get("id"):I.id,C].join("-"),St=(0,D.x)("accounts",W,{key:"slug",handler:(I,C)=>{switch(C.type){case e:return I.set("accountTypes",(0,l.fromJS)(C.payload));case _:return I.set("selected",C.slug);case f:return I.set("accountTypeRequested",C.payload.accountTypeRequested).set("isNewAccountTypeRequested",C.payload.isNewAccountTypeRequested).set("isTrialAccountTypeRequested",C.payload.isTrialAccountTypeRequested);case v:return I.set(X(C.payload,"bandwidth"),(0,l.fromJS)(C.payload.bandwidth));case K:return I.set(X(C.payload,"bandwidthUsagePerDomain"),(0,l.fromJS)(C.payload.bandwidth));case o:return I.set(X(C.payload,"compliance"),(0,l.fromJS)(G(C.payload.compliance)));case M:return I.set(X(C.payload,"creator"),(0,l.fromJS)(C.payload));case i:return I.set("upgradePro",(0,l.fromJS)(C.payload.id));case U:return I.set(X(C.payload,"build_minutes"),(0,l.fromJS)({used:C.payload.status.minutes?C.payload.status.minutes.current:C.payload.status.minutes_used}));default:return null}}});function gt(I,C){let J=I.accounts.getIn(["entities",C]);return J?((0,a.F0)(J)&&(J=J.merge({user_capabilities:{billing:J.getIn(["user_capabilities","billing"])}})),J=J.mergeIn(["capabilities"],Bt(I,J)),J=J.mergeIn(["compliance"],H(I,J.get("id"))),J):null}function Dt(I){const C=I.accounts.getIn(["pages","accounts","ids"]),J=C&&C.map(lt=>gt(I,lt));return J&&J.sort((lt,dt)=>lt.get("name").localeCompare(dt.get("name")))}function Ot(I,C){return I.accounts.getIn(["entities",C.get("slug"),"error"])}function vt(I){const C=I.user,J=Dt(I),lt=C==null?void 0:C.get("preferred_account_id"),dt=J==null?void 0:J.find(ft=>ft.get("id")===lt);return dt||C&&J&&(J.find(ft=>ft.get("default")&&ft.getIn(["owner_ids",0])===C.get("id"))||J.first())}function Mt(I){return I.accounts.get("accountTypeRequested")}function Rt(I){return I.accounts.get("isNewAccountTypeRequested")}function wt(I){return I.accounts.get("isTrialAccountTypeRequested")}function xt(I){return I.accounts.get("accountTypes")}function Yt(I){const C=I.accounts.get("selected")||(0,p.le)("nf-team");return gt(I,C)||vt(I)}function Bt(I,C){const J=I.accounts.get(X(C,"bandwidth")),lt=I.accounts.get(X(C,"build_minutes"));return J&&lt&&(0,l.Map)({period_start_date:J.get("period_start_date"),period_end_date:J.get("period_end_date"),last_updated_at:J.get("last_updated_at"),bandwidth:J,build_minutes:lt.set("included",C.getIn(["capabilities","build_minutes","included"]))})}function Zt(I,C){var J;return(J=I.accounts)==null?void 0:J.get(X({id:C},"bandwidthUsagePerDomain"))}const G=I=>((!I||I.private_corp_repos.in_compliance!==!1)&&(I.private_corp_repos.in_compliance=!0),I);function H(I,C){var J;return(J=I.accounts)==null?void 0:J.get(X({id:C},"compliance"))}},11212:(_t,z,t)=>{t.d(z,{Dc:()=>W,Ji:()=>j,PO:()=>at,Pc:()=>x,Te:()=>Y,Tf:()=>et,Wo:()=>Q,Ww:()=>y,XF:()=>mt,Z$:()=>tt,_$:()=>b,bc:()=>q,co:()=>k,gg:()=>Z,lW:()=>rt,mE:()=>B,mq:()=>V,nV:()=>ut,p_:()=>pt,wi:()=>ct});var l=t(90046),F=t.n(l),m=t(18643),P=t(52019),D=t(57368),T=t(2799),O=t(61712);const S="ANALYTICS_METRIC_SUCCESS",p="ANALYTICS_METRIC_FETCHING_DONE",E="ANALYTICS_METRIC_FETCHING_STARTED",a="pageviews",s="pageviews-summary",r="unique-visitors",c="unique-visitors-summary",d="top-locations",n="top-sources",e="top-pages",o="bandwidth-used",i="bandwidth-used-summary",u="not-found",_={resolution:"day",days:30};let f=30;const v=(0,m.Z)(S,(g,N,X,{data:St})=>({metric:g,siteId:N.get("id"),period:X,data:St})),K=(0,m.Z)(p,(g,N)=>({metric:g,siteId:N.get("id")})),U=(0,m.Z)(E,(g,N)=>({metric:g,siteId:N.get("id")}));let M;function W(g){const N=g.get("id");return(0,T.p5)((X,St,gt)=>gt.enableAnalytics(N).then(()=>X((0,O.EQ)(g.get("name")))).then(Dt=>X((0,O.ZO)(Dt))))}function j(g){const N=g.get("id"),X=g.get("analytics_instance_id");return(0,T.p5)((St,gt,Dt)=>X?Dt.deleteAnalytics(N,X).then(()=>St((0,O.EQ)(g.get("name")))):Promise.resolve())}function ct(g){return(N,X)=>{const{config:St}=X();return M=M||new D.ZP(St),g(N,X,M)}}function ot(g="day",N=30,X=0,St){const gt=new Date;return g==="hour"?St==="uniqueVisitors"?{from:(0,P.YD)(gt,1+X).getTime(),to:(0,P.YD)(gt,X).getTime()-36e5,resolution:g,minusOffsetDays:X}:{from:(0,P.YD)(gt,1+X).getTime(),to:(0,P.YD)(gt,X).getTime(),resolution:g,minusOffsetDays:X}:{from:(0,P.b7)((0,P.YD)(gt,N+X)).getTime(),to:X?(0,P.iX)((0,P.YD)(gt,X)).getTime():gt.getTime(),resolution:g,minusOffsetDays:X}}function Et(g="day",N=30,X=0,St){return N===7?{period:ot(g,N,X),periodByRange:ot("range",N,X)}:N===1?{period:ot(g,24,X,St),periodByRange:ot("range",N,X)}:{period:ot(g,N,X),periodByRange:ot("range",N,X)}}function Y(g,{resolution:N,days:X,minusOffsetDays:St}=_){const{period:gt,periodByRange:Dt}=Et(N,X,St);return f=X,ct((Ot,vt,Mt)=>Promise.all([Ot(U(s,g)),Ot(U(a,g)),Mt.pageviews(g.get("id"),gt).then(Rt=>Ot(v(a,g,gt,Rt))),Mt.pageviews(g.get("id"),Dt).then(Rt=>Ot(v(s,g,gt,Rt)))]).then(()=>Ot(K(a,g))).then(()=>Ot(K(s,g))))}function at(g,N){return g.analytics.get(`${N.get("id")}-${a}`)&&g.analytics.get(`${N.get("id")}-${a}`).toJS()}function $(g,N){return g.analytics.get(`${N.get("id")}-${s}`)&&g.analytics.get(`${N.get("id")}-${s}`).toJS()}function x(g,{resolution:N,days:X,minusOffsetDays:St=0}=_){const{period:gt,periodByRange:Dt}=Et(N,X,St,"uniqueVisitors");return f=X,ct((Ot,vt,Mt)=>Promise.all([Ot(U(c,g)),Ot(U(r,g)),Mt.uniqueVisitors(g.get("id"),gt).then(Rt=>Ot(v(r,g,gt,Rt))),Mt.uniqueVisitors(g.get("id"),Dt).then(Rt=>Ot(v(c,g,Dt,Rt)))]).then(()=>Ot(K(r,g))).then(()=>Ot(K(c,g))))}function rt(g,N){return g.analytics.get(`${N.get("id")}-${r}`)&&g.analytics.get(`${N.get("id")}-${r}`).toJS()}function L(g,N){return g.analytics.get(`${N.get("id")}-${c}`)&&g.analytics.get(`${N.get("id")}-${c}`).toJS()}function B(g,{resolution:N,days:X,minusOffsetDays:St=0}=_){const{period:gt}=Et(N,X,St);return ct((Dt,Ot,vt)=>(Dt(U(d,g)),vt.topLocations(g.get("id"),gt).then(Mt=>Dt(v(d,g,gt,Mt))).then(()=>Dt(K(d,g)))))}function tt(g,N){return g.analytics.get(`${N.get("id")}-${d}`)&&g.analytics.get(`${N.get("id")}-${d}`).toJS()}function q(g,{resolution:N,days:X,minusOffsetDays:St=0}=_){const{period:gt}=Et(N,X,St);return ct((Dt,Ot,vt)=>(Dt(U(n,g)),vt.topSources(g.get("id"),gt).then(Mt=>Dt(v(n,g,gt,Mt))).then(()=>Dt(K(n,g)))))}function ut(g,N){return g.analytics.get(`${N.get("id")}-${n}`)&&g.analytics.get(`${N.get("id")}-${n}`).toJS()}function y(g,{resolution:N,days:X,minusOffsetDays:St=0}=_){const{period:gt}=Et(N,X,St);return ct((Dt,Ot,vt)=>(Dt(U(e,g)),vt.topPages(g.get("id"),gt).then(Mt=>Dt(v(e,g,gt,Mt))).then(()=>Dt(K(e,g)))))}function Z(g,N){return g.analytics.get(`${N.get("id")}-${e}`)&&g.analytics.get(`${N.get("id")}-${e}`).toJS()}function Q(g,{resolution:N,days:X,minusOffsetDays:St=0}=_){const{period:gt,periodByRange:Dt}=Et(N,X,St);return f=X,ct((Ot,vt,Mt)=>Promise.all([Ot(U(i,g)),Ot(U(o,g)),Mt.bandwidthUsed(g.get("id"),gt).then(Rt=>Ot(v(o,g,gt,Rt))),Mt.bandwidthUsed(g.get("id"),Dt).then(Rt=>Ot(v(i,g,Dt,Rt)))]).then(()=>Ot(K(o,g))).then(()=>Ot(K(i,g))))}function et(g,N){return g.analytics.get(`${N.get("id")}-${o}`)&&g.analytics.get(`${N.get("id")}-${o}`).toJS()}function st(g,N){return g.analytics.get(`${N.get("id")}-${i}`)&&g.analytics.get(`${N.get("id")}-${i}`).toJS()}function mt(g,{resolution:N,days:X,minusOffsetDays:St=0}=_){const{period:gt}=Et(N,X,St);return ct((Dt,Ot,vt)=>(Dt(U(u,g)),vt.notFound(g.get("id"),gt).then(Mt=>Dt(v(u,g,gt,Mt))).then(()=>Dt(K(u,g)))))}function pt(g,N){return g.analytics.get(`${N.get("id")}-${u}`)&&g.analytics.get(`${N.get("id")}-${u}`).toJS()}function h(g,N=null){return g.reduce((X,St)=>{const gt=N?St[N]:St[1];return X+gt},0)}function b(){return f}function V(g,N){var X;const{data:St,status:gt,timePeriod:Dt,isFetching:Ot}=$(g,N)||{},{data:vt,status:Mt,timePeriod:Rt,isFetching:wt}=L(g,N)||{},{data:xt,status:Yt,timePeriod:Bt,isFetching:Zt}=st(g,N)||{};return{timePeriod:Dt||Rt||Bt,pageviewSummary:{total:St&&h(St),status:gt,isFetching:Ot},uniqueVisitorSummary:{total:((X=vt==null?void 0:vt[0])==null?void 0:X[1])||0,status:Mt,isFetching:wt},bandwidthSummary:{total:xt&&h(xt,"siteBandwidth"),status:Yt,isFetching:Zt}}}const k=(g=(0,l.Map)(),N)=>{switch(N.type){case E:return g.setIn([`${N.payload.siteId}-${N.payload.metric}`,"isFetching"],!0);case S:return g.set(`${N.payload.siteId}-${N.payload.metric}`,(0,l.fromJS)({data:N.payload.data,timePeriod:{from:N.payload.period.from,to:N.payload.period.to,minusOffsetDays:N.payload.period.minusOffsetDays},status:"current"}));case p:return g.setIn([`${N.payload.siteId}-${N.payload.metric}`,"isFetching"],!1);default:return g}}},2799:(_t,z,t)=>{t.d(z,{Hx:()=>F.Z,ac:()=>T,oA:()=>p,p5:()=>O,vd:()=>S});var l=t(42320),F=t(93967),m=t(4310),P=t(87883);let D=null;function T(E){const{config:a,user:s}=E;return a&&s&&D?D.token!==s.get("access_token")?D=new l.Z(a.set("accessToken",s.get("access_token"))):D.token===s.get("access_token")&&D:s?D=new l.Z(a.set("accessToken",s.get("access_token"))):new l.Z(a)}const O=function(){return E=>(a,s)=>{const r=T(s());if(!r)return Promise.reject(new F.Z("No API"));const c=E(a,s,r);return c&&c.catch&&c.catch(d=>((d==null?void 0:d.code)===401&&a((0,m.wq)(d)),d instanceof F.Z?Promise.reject(d):Promise.reject(new F.Z(d))))}}();function S(E){return O((a,s,r)=>(0,P.$_)((c,d,n)=>E(a,s,r,n))(a,s))}function p(E){const a=E instanceof F.Z?E:new F.Z(E);return a==null?void 0:a.toString().replace(/^Error:\s?/,"")}},47260:(_t,z,t)=>{t.d(z,{H6:()=>T,KL:()=>s,KM:()=>n,UG:()=>D,W3:()=>S,Xo:()=>e,Yn:()=>E,bU:()=>d,iT:()=>a,li:()=>p,pO:()=>O,rP:()=>P,zJ:()=>r});var l=t(24761),F=t(2799);const m=(0,l.P)("applications"),P=(0,l.x)("applications",m,{key:"client_id"});function D(o){return(0,F.p5)((i,u,_)=>_.application(o).then(f=>i(m.applicationSuccess(f.data))))}function T(){return(0,F.p5)((o,i,u)=>u.applications().then(_=>o(m.applicationsSuccess("oauth",_.data,_.pagination))))}function O(o){return(0,F.p5)((i,u,_)=>_.authorizedApplications(o).then(f=>i(m.applicationsSuccess("authorized",f.data,f.pagination))))}function S(o){return(0,F.p5)((i,u,_)=>_.createApplication(o).then(f=>i(T())))}function p(o,i){return(0,F.p5)((u,_,f)=>f.updateApplication(o,i).then(v=>u(m.applicationSuccess(v.data))))}function E(o){return(0,F.p5)((i,u,_)=>_.removeApplication(o).then(f=>i(T())))}function a(o,i){return(0,F.p5)((u,_,f)=>f.revokeAuthorizedApplication(o,i).then(v=>u(O(i))))}function s(o,i,u){return(0,F.p5)((_,f,v)=>v.createPersonalToken(o,i,u))}function r(o,i){return o.applications.getIn(["entities",i])}function c(o){const i=o.applications.getIn(["pages","oauth","ids"]);return i&&i.map(u=>r(o,u))}function d(o){const i=o.applications.getIn(["pages","authorized","ids"]);return i&&i.map(u=>r(o,u))}function n(o){const i=c(o);return i&&i.filter(u=>!u.get("personal"))}function e(o){const i=c(o);return i&&i.filter(u=>u.get("personal"))}},85766:(_t,z,t)=>{t.d(z,{LW:()=>P,Sy:()=>T,rw:()=>O,sQ:()=>D,yb:()=>S});var l=t(24761),F=t(2799);const m=(0,l.P)("authProviders"),P=(0,l.x)("authProviders",m);function D(p){return(0,F.p5)((E,a,s)=>s.authProviders(p.get("id")).then(r=>E(m.authProvidersSuccess(p.get("id"),r.data,r.pagination)),r=>E(m.authProvidersFailure(p.get("id"),r))))}function T(p,E){return(0,F.p5)((a,s,r)=>{const{type:c,apiID:d,apiSecret:n}=E.toJS();return r.createAuthProvider(p.get("id"),c,d,n).then(e=>a(D(p)))})}function O(p,E){return(0,F.p5)((a,s,r)=>r.removeAuthProvider(p.get("id"),E.get("name")).then(c=>a(D(p))))}function S(p,E){const a=p.authProviders.getIn(["pages",E,"ids"]);return a&&a.map(s=>p.authProviders.getIn(["entities",s]))}},4310:(_t,z,t)=>{t.d(z,{$D:()=>at,A9:()=>h,B9:()=>V,Bh:()=>Mt,DL:()=>St,EA:()=>Rt,HF:()=>Bt,KE:()=>Zt,Kk:()=>Z,Nq:()=>st,Ov:()=>q,Qk:()=>W,Sz:()=>g,TX:()=>ut,VB:()=>pt,Wb:()=>M,Wk:()=>Yt,YR:()=>gt,Yn:()=>X,_b:()=>et,c0:()=>Q,ek:()=>wt,fq:()=>k,hP:()=>Y,k3:()=>mt,ou:()=>L,pH:()=>B,t:()=>Dt,wq:()=>y,xh:()=>tt,zj:()=>b});var l=t(90046),F=t.n(l),m=t(19271),P=t(18643),D=t(74479),T=t(40943),O=t(91768),S=t(23229),p=t(90956),E=t(67491),a=t(7390),s=t(76352),r=t(73274),c=t(93967),d=t(10583),n=t(2799),e=t(87883),o=t(48534),i=t(43455);const u="nf-session",_="AUTH_ERROR",f="USER_REQUEST",v="USER_ERROR",K="RESET_PASSWORD_SUCCESS",U="LOGIN_USER",M="LOGOUT_USER",W="USER_SIGNUP",j="USER_SUCCESS",ct="USER_SUCCESS_SHALLOW",ot=(0,P.Z)(K),Et=(0,P.Z)(W,G=>({user:G}));function Y(){try{const G=localStorage.getItem(u);return G&&JSON.parse(G).access_token}catch(G){return console.error("Error parsing data from local storage",G),null}}function at({reload:G=!1}={}){return(H,I)=>{const C=I(),J=!G&&Bt(C);if(J)return Promise.resolve(J);const lt=Y();return lt&&(0,E.W8)()?$(C.config,lt).then(dt=>(H({type:U,payload:dt}),Bt(I()))):Promise.resolve(null)}}function $(G,H){const I={access_token:H};return(0,n.ac)({config:G,user:(0,l.Map)(I)}).user().then(C=>({...C.data,...I}))}function x(G,H){return(0,n.ac)({config:G}).verifyUserByToken(H).then(C=>{if(C.data.state==="error")throw new c.Z(C.data);return C.data.data.user})}function rt(G,H,I){const{config:C}=G();return I?x(C,H):$(C,H)}function L({token:G,isSignup:H,isReviewer:I,isVerify:C,redirect:J}){return(lt,dt)=>rt(dt,G,C).then(async ft=>{lt({type:M});const Lt=(ft==null?void 0:ft.access_token)&&ft.access_token!=="use-http-auth-token";if((H||!(0,E.W8)())&&Lt)try{await(0,r.sV)({access_token:ft.access_token})}catch{}lt(B(ft,H));const Nt=(0,s.le)("persistedQueryParams")||"";(0,s.e8)("persistedQueryParams");const ht=(0,O.VP)(Nt,jt=>E.Fh.includes(jt));H&&!I&&ht.append("new_user",H);const Kt=ht.toString()&&`?${ht.toString()}`,Jt=`${J||""}${Kt}`;lt(vt(`${Jt}`))}).catch(ft=>Promise.reject(new c.Z("Invalid authorization code")))}function B(G,H,I,C){return(J,lt)=>{if(G=Object.assign({},G),H||G.isSignup?J(Et(G)):I||D.iN.appUserLogin({category:"user",label:"User Login"}),delete G.isSignup,I||G.isUpdate){delete G.isUpdate;const ht=(0,s.le)(u);G=(0,l.fromJS)(JSON.parse(ht)).mergeDeep((0,l.fromJS)(G)).toJS()}const dt={access_token:"use-http-auth-token"};(0,s.D$)(u,JSON.stringify(dt));const{originAllowedToAuth:ft,openerOrigin:Lt}=Zt();try{!I&&ft&&(0,r.$f)().then(ht=>{dt.access_control_token=ht}).finally(()=>{window.opener.postMessage({type:"LOGIN",payload:JSON.stringify(dt)},Lt)})}catch(ht){console.log("auth \uFE65 loginUser",ht)}const Nt={type:C||U,payload:{loggedInAt:Date.now(),isSignup:H,isUpdate:I,...G}};J(Nt)}}function tt(G,H){return(0,n.p5)((I,C,J)=>J.fetchEdgeAccessToken(G,H))}function q(G){return(H,I)=>{(0,r.vH)(),(0,s.ZL)({exclude:[p.N9,E.d$,T.Nk]}),H({type:M}),H(vt(G))}}function ut(G){return(0,n.p5)((H,I,C)=>{const J=Bt(I());return(0,a.jK)(J==null?void 0:J.get("email"))||C.destroyAccessToken(),S.Z.shutdown(),H(q(G))})}function y(G){return{type:_,payload:G}}function Z(G){return(0,n.p5)((H,I,C)=>C.resetPasswordEmail(G))}function Q(G,H,I){return(0,n.p5)((C,J,lt)=>lt.resetPassword(G,H,I).then(()=>{C(q("/")),C(ot({success:!0}))}))}function et(G){return(0,n.p5)((H,I,C)=>(H({type:f}),C.updateUserQuestionnaireTelemetry(G).then(()=>Bt(I()))))}function st(G){return(0,n.p5)((H,I,C)=>(H({type:f}),C.updateUser(G).then(async({data:J})=>{const{password:lt,full_name:dt,avatar:ft}=G;ft&&await C.updateUserAvatar(ft).then(()=>{H(at({reload:!0})),H((0,d.vP)())}).catch(Lt=>new c.Z(Lt)),H(lt?q(window.location.pathname):B(J,!1,!0,j)),!lt&&dt&&H((0,d.vP)())}).then(()=>Bt(I()))))}function mt(G){return(0,n.p5)((H,I,C)=>(H({type:f}),C.updateUser(G).then(async({data:J})=>{H({type:ct,payload:J})})))}function pt(){return(0,n.p5)((G,H,I)=>I.deleteUserAvatar().then(()=>{G(at({reload:!0})),G((0,d.vP)())}).catch(C=>new c.Z(C)))}function h(G,H){return(0,n.p5)((I,C,J)=>J.verifyUser(G,H).then(()=>I(at({reload:!0}))).catch(lt=>new c.Z(lt)))}function b(G,H){return(0,n.p5)((I,C,J)=>J.verifySamlUserByToken(G,H).then(lt=>I((0,o.e7)(lt.data.data.user,lt.data.data.saml_slug))).catch(lt=>new c.Z(lt)))}function V(){return D.iN.appUserDelete(),(0,n.p5)((G,H,I)=>I.disableUser())}function k(G="slides",H="closed"){return(I,C)=>{const lt=Bt(C()).get("onboarding_progress")||(0,l.Map)();return I(st({onboarding_progress:lt.set(G,H)}))}}function g(G){return(H,I)=>{var C;const J=Bt(I());let lt={};return typeof J.getIn(["onboarding_progress","guided_onboarding"])!="string"&&(lt=(C=J.getIn(["onboarding_progress","guided_onboarding"],(0,l.Map)()))==null?void 0:C.toJS()),H(k("guided_onboarding",{...lt,...G}))}}function N(G){return new r.ZP(G.config.toJS())}function X({provider:G}){return(0,n.p5)((H,I,C)=>((0,r.xw)({url:"/authorizing.html",provider:G}),C.authLink({provider:G}).then(J=>new Promise((lt,dt)=>N(I()).open({url:J.data.redirect_uri,provider:G},(ft,Lt)=>ft?dt(ft):lt(Lt)))).then(J=>H(at({reload:!0}))).catch(J=>((0,r.on)(),Promise.reject(J)))))}function St({provider:G}){return(0,n.p5)((H,I,C)=>C.authUnlink({provider:G}).then(J=>H(at({reload:!0}))))}function gt(G){return(0,n.p5)((H,I,C)=>{const J=I(),dt={provider:"github",redirect:!0,login:!Bt(J)||G.signup||G.forceAuth,...G};return dt.amnesia?C.resetPasswordEmail(dt.email).then(()=>({verify:!0})):new Promise((ft,Lt)=>N(J).authenticate(dt,async(Nt,ht)=>{var Kt;if(Nt)return Lt(Nt);if(ht.verify)return ft(ht);if(ht.redirect_uri)return H(vt(ht.redirect_uri)),ft(ht);dt.login&&ht.user&&(H({type:M}),((Kt=ht==null?void 0:ht.user)==null?void 0:Kt.access_token)&&ht.user.access_token!=="use-http-auth-token"&&(await(0,r.sV)({access_token:ht.user.access_token}),ht.user.access_token="use-http-auth-token"),H(B(ht.user,ht.new_user)),H(vt(dt.next))),H((0,e.fc)(dt.provider,ht)),ft(ht)}))})}function Dt(G){Mt(G)&&(0,s.D9)("next",G)}function Ot(G){const H=typeof G=="string"&&G||sessionStorage.getItem("next")||"/";return Mt(H)?H:"/"}function vt(G){return G=Ot(G),H=>{H((0,i.Ee)(G))}}function Mt(G){return G&&(G.startsWith("/sso")||G.startsWith("/auth"))?(console.log("next redirect is for an auth path. Ignoring to avoid loops",G),!1):!0}function Rt(G=null,H){switch(H.type){case _:return G?G.set("authError","forbidden"):F().fromJS({authError:"missing"});case m.nk:return G&&G.delete("authError");case U:return F().fromJS(H.payload);case M:return null;case f:return G.set("isFetching",!0);case j:return G.mergeDeep(H.payload,{isFetching:!1,authError:null});case ct:return G.merge(H.payload,{isFetching:!1,authError:null});case v:return G.merge({isFetching:!1,error:H.payload});default:return G}}function wt(G=(0,l.fromJS)({}),H){switch(H.type){case K:return G.merge((0,l.fromJS)({resetSuccess:H.payload.success}));default:return G}}function xt(G){const{user:H}=G;return(H==null?void 0:H.get("password_errors"))||null}function Yt(G){const{userPassword:H}=G;return(H==null?void 0:H.get("resetSuccess"))||!1}function Bt(G){const{user:H}=G;return H&&H.get("id")?H:null}function Zt(){var G;let H="",I=!1;if(window.opener===null)return{originAllowedToAuth:!!I,openerOrigin:H};const J=new URLSearchParams(window.location.search).get("opener-origin")||(0,s.jE)("opener-origin");try{H=(G=window.opener)==null?void 0:G.origin}catch(dt){console.error(dt)}return!H&&J&&((0,s.w4)("opener-origin",J,1e3*60*30),H=decodeURIComponent(J)),H&&(H=new URL(H).origin),I=[window.origin,"https://www.netlify.com","https://docs.netlify.com"].includes(H),I||(/--docs.netlify.app$/.test(H)||/--www.netlify.app$/.test(H))&&(I=!0),{originAllowedToAuth:!!I,openerOrigin:H}}},25556:(_t,z,t)=>{t.d(z,{Ks:()=>u,Uc:()=>U,gg:()=>rt,nY:()=>Et,oF:()=>Y,ot:()=>i,xm:()=>ot,y_:()=>j});var l=t(90046),F=t.n(l),m=t(18643),P=t(37702),D=t(10583),T=t(2799);const O="BILLING_SUCCESS",S="PAYMENT_PROVIDER_TOKEN",p="PAYMENT_PROVIDER_TOKEN_SECURE_DECISION",E="BILLING_SUMMARY_SUCCESS",a="ACCOUNT_SUBSCRIPTIONS_SUCCESS",s="ACCOUNT_INVOICES_SUCCESS",r=(0,m.Z)(O,L=>L),c=(0,m.Z)(S,L=>L),d=(0,m.Z)(p,L=>L),n=(0,m.Z)(E,L=>L),e=(0,m.Z)(a,(L,B)=>({id:L.get("id"),subscriptions:B})),o=(0,m.Z)(s,(L,B)=>({id:L.get("id"),invoices:B}));function i(L){return B=>{B(d(L))}}function u(L){return(B,tt)=>{B((0,D.i6)(L)),B(_(L)),B(f(L)),B(v(L))}}function _(L){return(0,T.p5)((B,tt,q)=>q.accountBillingSummary(L.get("slug")).then(ut=>B(n(ut.data))))}function f(L){return(0,T.p5)((B,tt,q)=>q.accountSubscriptions(L.get("slug")).then(ut=>B(e(L,ut.data))))}function v(L){return(0,T.p5)((B,tt,q)=>q.accountInvoices(L.get("slug"),{pending:!0}).then(ut=>B(o(L,ut.data))))}function K(L){return withApi((B,tt,q)=>q.updateBilling(L).then(ut=>B(r(ut.data))))}function U(L,B){return(0,T.p5)((tt,q,ut)=>{const y=ot(q()),Z=Y(q(),L,B,y);return tt(c(null)),ut.paymentProviderToken(Z).then(Q=>(Q.data.sandbox=!!Z.sandbox,Q.data.enterpriseException=!!Z.enterpriseException,Q.data.secure=!!Z.secure,tt(c(Q.data)),Q.data))})}function M(L,B){return L.base.toString().localeCompare(Boolean(B.base).toString())*-1||(L.site_domain||L.site_name||"").localeCompare(B.site_domain||B.site_name||"")||(L.site_id||"").localeCompare(B.site_id||"")||(L.title||"").localeCompare(B.title||"")}function W(L){return L.base||L.amount?!0:!(L.product_name.toLowerCase()==="bandwidth"||/usage/i.test(L.title)||L.quantity===0&&L.charges.every(B=>B.quantity===0))}function j(L=(0,l.Map)(),B){switch(B.type){case E:return L.set(B.payload.id,(0,l.fromJS)(B.payload));case a:return L.set(`${B.payload.id}-subscriptions`,(0,l.fromJS)(B.payload.subscriptions.filter(W).sort(M)));case s:return L.set(`${B.payload.id}-invoices`,(0,l.fromJS)(B.payload.invoices));case S:return L.set("paymentProviderToken",B.payload);case p:return L.set("paymentProviderTokenSecure",B.payload);default:return L}}function ct(L){return L.billing&&L.billing.get("paymentProviderToken")}function ot(L){return L.billing&&L.billing.get("paymentProviderTokenSecure")}function Et(L){return L?(L.get("payments_gateway_name")||"").startsWith("zuora")?"zuora":"braintree":"zuora"}function Y(L,B,tt,q){const ut=Et(B),y=(0,P.qC)(B);return{provider:ut,sandbox:tt,secure:q,accountId:B&&B.get("id"),enterpriseException:y}}function at(L,B){return L.billing.get(B.get("id"))}function $(L,B){return L.billing.get(`${B.get("id")}-subscriptions`)}function x(L,B){return L.billing.get(`${B.get("id")}-invoices`)}function rt(L,B){const tt=at(L,B);return tt&&tt.merge({subscriptions:$(L,B),invoices:x(L,B)})}},41256:(_t,z,t)=>{t.d(z,{$T:()=>O,Bt:()=>P,HN:()=>T,Kr:()=>S,xF:()=>D});var l=t(24761),F=t(2799);const m=(0,l.P)("buildHooks"),P=(0,l.x)("buildHooks",m);function D(E){return(0,F.p5)((a,s,r)=>r.buildHooks(E.get("id")).then(c=>a(m.buildHooksSuccess(E.get("id"),c.data,c.pagination))))}function T(E,a){return(0,F.p5)((s,r,c)=>c.addBuildHook(E.get("id"),{title:a.get("title"),branch:a.get("branch")}).then(d=>s(D(E))))}function O(E,a){return(0,F.p5)((s,r,c)=>c.removeBuildHook(E.get("id"),a.get("id")).then(d=>s(D(E))))}function S(E,a){const s=a&&E.buildHooks.getIn(["pages",a.get("id"),"ids"]);return s&&s.map(r=>p(E,r))}function p(E,a){return E.buildHooks.getIn(["entities",a])}},41598:(_t,z,t)=>{t.d(z,{$1:()=>M,DF:()=>tt,Hg:()=>$,MZ:()=>ut,UL:()=>at,ej:()=>j,fO:()=>x,pO:()=>B,qJ:()=>ct,t9:()=>Et,tb:()=>Y,wr:()=>q,x6:()=>ot});var l=t(90046),F=t.n(l),m=t(18643),P=t(24761),D=t(75257),T=t(2799);const O="BUILD_STATUS_SUCCESS",S="BUILD_STATUS_PER_SITE_SUCCESS",p="BUILDS_PER_DAY_SUCCESS",E="BUILD_QUEUE_BUMP_REQUEST",a="BUILD_QUEUE_BUMP_SUCCESS",s="BUILD_QUEUE_BUMP_FAILURE",r="WS_BUILD_CREATED",c="WS_BUILD_MODIFIED",d="WS_BUILD_DELETED",n=(0,m.Z)(O,(y,Z)=>({id:y.get("id"),data:Z})),e=(0,m.Z)(S,(y,Z)=>({id:y.get("id"),data:Z})),o=(0,m.Z)(p,(y,Z)=>({id:y.get("id"),data:Z})),i=(0,m.Z)(E,y=>({buildId:y})),u=(0,m.Z)(a,y=>({buildId:y})),_=(0,m.Z)(s,(y,Z)=>({buildId:y,error:Z})),f=(0,m.Z)(r,y=>y),v=(0,m.Z)(c,y=>y),K=(0,m.Z)(d,y=>y),U=(0,P.P)("builds"),M=(0,P.x)("builds",U,{handler:(y,Z)=>{const{type:Q,payload:et}=Z;switch(Q){case O:return y.set(et.id,(0,l.fromJS)(et.data));case S:return y.set(`${et.id}-per-site`,(0,l.fromJS)(et.data));case p:return y.set(`${et.id}-per-day`,(0,l.fromJS)(et.data));case E:{const{buildId:st}=et;return y.withMutations(mt=>{mt.setIn(["entities",st,"isPushing"],!0).setIn(["entities",st,"errorOnQueueBump"],null)})}case a:{const{buildId:st}=et;return y.setIn(["entities",st,"isPushing"],!1)}case s:{const{buildId:st,error:mt}=et;return y.withMutations(pt=>{pt.setIn(["entities",st,"errorOnQueueBump"],(0,l.fromJS)(mt)).setIn(["entities",st,"isPushing"],!1)})}case r:return(0,D.qK)(y,et);case c:return(0,D.Rt)(y,et);case d:return(0,D.GM)(y,et);default:return null}}});function W(y){return y.get("id")}function j(y,Z={},Q=!1){const et=W(y);return(0,T.p5)((st,mt,pt)=>(Q&&st(U.buildsRequest(et)),pt.accountBuilds(y.get("slug"),Z).then(h=>st(U.buildsSuccess(et,h.data,h.pagination)))))}function ct(y){return(0,T.p5)((Z,Q,et)=>et.accountBuildStatus(y.get("slug")).then(st=>Z(n(y,st.data))))}function ot(y,Z){return(0,T.p5)((Q,et,st)=>(Q(i(Z)),st.accountBuildQueueBump(y.get("slug"),Z).then(()=>Q(u(Z))).catch(mt=>{throw Q(_(Z,mt)),mt})))}function Et(y,Z){return y.builds.get(Z.get("id"))}function Y(y){return(0,T.p5)((Z,Q,et)=>et.accountBuildStatusPerSite(y.get("slug")).then(st=>Z(e(y,st.data))))}function at(y,Z){return y.builds.get(`${Z.get("id")}-per-site`)}function $(y){return(0,T.p5)((Z,Q,et)=>et.accountBuildsPerDay(y.get("slug")).then(st=>{Z(o(y,st.data))}))}function x(y,Z){return y.builds.get(`${Z.get("id")}-per-day`)}function rt(y,Z){const Q=y.builds.getIn(["entities",Z]);return Q&&Q.set("build_id",Q.get("id"))}function L(y,Z){const Q=tt(y,Z);return Q&&Q.get("isFetching")}function B(y,Z){if(L(y,Z))return null;const Q=y.builds.getIn(["pages",W(Z),"ids"]);return Q&&Q.map(et=>rt(y,et))}function tt(y,Z){return y.builds.getIn(["pages",W(Z)])}const q=(y,Z)=>Q=>{const{page:et,account_id:st}=Z;if(et===1){const mt=W((0,l.fromJS)({id:st}));Q(f(y.set("listKey",mt)))}},ut=(y,Z)=>Q=>{const et=W((0,l.fromJS)({id:Z.account_id}));y.get("state")==="deleted"?Q(K(y.set("listKey",et))):Q(v(y.set("listKey",et)))}},52642:(_t,z,t)=>{t.d(z,{AB:()=>E,Bm:()=>p,Dj:()=>S,X1:()=>a,rE:()=>s});var l=t(90046),F=t.n(l),m=t(18643),P=t(2799),D=t(61712);const T="CERTIFICATE_SUCCESS",O=(0,m.Z)(T,(r,c)=>({siteId:r,certificate:c}));function S(r){return(0,P.p5)((c,d,n)=>{const e=r.get("id");return n.certificate(e).then(o=>c(O(e,o.data)))})}function p(r,c,d){return(0,P.p5)((n,e,o)=>{const i=r.get("id");return c.force_ssl?n((0,D.L3)(r,c)):o.updateSsl(i,c,d).then(({data:u})=>(u&&n(O(i,u)),(!u||d)&&setTimeout(_=>n(S(r)),1*30*1e3),n((0,D.EQ)(r.get("name")))))})}function E(r){const c=r.get("id");return(0,P.p5)((d,n,e)=>e.verifySsl(c).then(o=>(0,l.fromJS)(o.data)))}function a(r=(0,l.Map)(),c){switch(c.type){case T:return r.set(c.payload.siteId,(0,l.fromJS)(c.payload.certificate));default:return r}}function s(r,c){return c.get("ssl")&&r.certificates.get(c.get("id"))}},7900:(_t,z,t)=>{t.d(z,{Ji:()=>S,Q4:()=>a,TZ:()=>E,rF:()=>P,vc:()=>D,vv:()=>O});var l=t(90046),F=t.n(l);const m="UPDATE_CONFIG";function P(s){return{type:m,payload:s}}function D(s=F().Map(),r){switch(r.type){case m:return s.merge(r.payload);default:return s}}function T(s){return s.config.get("apiBase")}function O(s){const r=T(s);return r&&r.replace(/\/api\/v\d\/?$/,"")}function S(s){return s.config.get("siteId")}function p(s){return s.config.get("firebase")}function E(s){return s.config.get("githubAppId")}function a(s){return{base:s.config.get("launchDarklyBaseProxyUrl"),events:s.config.get("launchDarklyEventsProxyUrl")}}},22328:(_t,z,t)=>{t.d(z,{C0:()=>E,qh:()=>O,t6:()=>p});var l=t(90046),F=t.n(l),m=t(18643),P=t(2799);const D="DEPLOY_ACTIVITY_SUCCESS",T=(0,m.Z)(D,a=>a);function O(a,s){var r;return(r=a.deployActivity.getIn(["data"]))==null?void 0:r.toJS()}function S([a,s]){const c=a.data.filter(n=>n.type==="comment").map(n=>n.service_comment_id),d=s.data.comments.filter(({body:n,id:e})=>!!n&&!c.includes(String(e)));return a.data.concat(d.map(n=>({type:"comment",comment:n})))}function p(a){return(0,P.p5)((s,r,c)=>Promise.all([c.deployActivity(a),c.fetchPullRequest(a)]).then(n=>{const e=S(n);return s(T(e))}).catch(n=>new P.Hx(n)))}const E=(a=(0,l.Map)(),s)=>{switch(s.type){case D:return a.set("data",(0,l.fromJS)(s.payload));default:return a}}},87498:(_t,z,t)=>{t.d(z,{A:()=>P,bO:()=>D,f$:()=>O});var l=t(24761),F=t(2799);const m=(0,l.P)("deployCommitters"),P=(0,l.x)("deployCommitters",m,{key:"deployId"});function D(S,p){var E;return(E=S.deployCommitters.getIn(["entities",p,"data",0]))==null?void 0:E.toJS()}function T(S){return withApi((p,E,a)=>a.deployCommitters(S).then(s=>p(m.deployCommittersSuccess("deployCommitters",[{deployId:S,data:s.data}]))))}function O(S,p){return(0,F.p5)((E,a,s)=>s.inviteCommitter(S,p).then(r=>{E(m.inviteCommittersSuccess(r.data))}).catch(r=>new F.Hx(r)))}},78264:(_t,z,t)=>{t.d(z,{Mi:()=>d,RR:()=>c,ox:()=>r,qN:()=>E,rK:()=>a});var l=t(90046),F=t.n(l),m=t(18643),P=t(2799),D=(n=>(n.DEPLOY_PLUGIN_RUNS_REQUEST="DEPLOY_PLUGIN_RUNS_REQUEST",n.DEPLOY_PLUGIN_RUNS_SUCCESS="DEPLOY_PLUGIN_RUNS_SUCCESS",n.DEPLOY_PLUGIN_RUNS_FAILURE="DEPLOY_PLUGIN_RUNS_FAILURE",n))(D||{});const T=(0,m.Z)("DEPLOY_PLUGIN_RUNS_REQUEST",n=>n),O=(0,m.Z)("DEPLOY_PLUGIN_RUNS_SUCCESS",(n,e)=>({deployId:n,deployPluginRuns:e})),S=(0,m.Z)("DEPLOY_PLUGIN_RUNS_FAILURE",(n,e)=>({deployId:n,error:e})),p=n=>n.reduce((e,o)=>(e.get(o.state)?e.set(o.state,e.get(o.state).push(o.package)):e.set(o.state,(0,l.List)([o.package]))).set("all",e.get("all").push(o.package)),(0,l.Map)({all:(0,l.List)()}));function E(n=(0,l.Map)(),e){switch(e.type){case"DEPLOY_PLUGIN_RUNS_REQUEST":return n.setIn([e.payload,"isFetching"],!0);case"DEPLOY_PLUGIN_RUNS_SUCCESS":{const{deployId:o,deployPluginRuns:i}=e.payload;return n.withMutations(u=>{i.forEach(_=>{u.setIn([o,"data",_.package],(0,l.fromJS)(_))}),u.setIn([o,"listByState"],p(i)).setIn([o,"isFetching"],!1)})}case"DEPLOY_PLUGIN_RUNS_FAILURE":{const{deployId:o,error:i}=e.payload;return n.setIn([o,"error"],(0,l.fromJS)(i)).setIn([o,"isFetching"],!1)}default:return n}}function a(n){return(0,P.p5)((e,o,i)=>(e(T(n)),i.deployPluginRuns(n).then(u=>e(O(n,u.data))).catch(u=>e(S(n,u)))))}function s(n,e){var o,i;return e&&(i=(o=n.deployPluginRuns.get(e))==null?void 0:o.get("isFetching"))!=null?i:!1}function r(n,e){var o;return e?(o=n.deployPluginRuns.get(e))==null?void 0:o.get("error"):void 0}function c(n,e){var o;return e?(o=n.deployPluginRuns.get(e))==null?void 0:o.get("data"):void 0}function d(n,e){var o;return e?(o=n.deployPluginRuns.get(e))==null?void 0:o.get("listByState"):void 0}},60362:(_t,z,t)=>{t.d(z,{$z:()=>p,CJ:()=>E,Ed:()=>a,LS:()=>s,SK:()=>r});var l=t(90046),F=t.n(l),m=t(18643),P=t(2799),D=(c=>(c.DEPLOY_SUMMARY_REQUEST="DEPLOY_SUMMARY_REQUEST",c.DEPLOY_SUMMARY_SUCCESS="DEPLOY_SUMMARY_SUCCESS",c.DEPLOY_SUMMARY_FAILURE="DEPLOY_SUMMARY_FAILURE",c))(D||{});const T=(0,m.Z)("DEPLOY_SUMMARY_REQUEST",c=>c),O=(0,m.Z)("DEPLOY_SUMMARY_SUCCESS",(c,d)=>({deployId:c,deploySummary:d})),S=(0,m.Z)("DEPLOY_SUMMARY_FAILURE",(c,d)=>({deployId:c,error:d}));function p(c=(0,l.Map)(),d){switch(d.type){case"DEPLOY_SUMMARY_REQUEST":return c.setIn([d.payload,"isFetching"],!0);case"DEPLOY_SUMMARY_SUCCESS":{const{deployId:n,deploySummary:e}=d.payload;return c.setIn([n,"data"],(0,l.fromJS)(e)).setIn([n,"isFetching"],!1)}case"DEPLOY_SUMMARY_FAILURE":{const{deployId:n,error:e}=d.payload;return c.setIn([n,"error"],(0,l.fromJS)(e)).setIn([n,"isFetching"],!1)}default:return c}}function E(c){return(0,P.p5)((d,n,e)=>(d(T(c)),e.deploySummary(c).then(o=>d(O(c,o.data))).catch(o=>d(S(c,o)))))}function a(c,d){var n,e;return(e=(n=c.deploySummary.get(d))==null?void 0:n.get("isFetching"))!=null?e:!1}function s(c,d){var n;return(n=c.deploySummary.get(d))==null?void 0:n.get("error")}function r(c,d){var n;return(n=c.deploySummary.get(d))==null?void 0:n.get("data")}},27196:(_t,z,t)=>{t.d(z,{Bn:()=>$,E:()=>U,FN:()=>x,JN:()=>W,Kr:()=>ct,LT:()=>at,N2:()=>M,Nw:()=>_,Oh:()=>ut,Q7:()=>j,dk:()=>st,e5:()=>f,hh:()=>Z,il:()=>ot,kR:()=>B,li:()=>rt,ly:()=>y,mh:()=>et,pU:()=>tt,rQ:()=>pt,tQ:()=>q,tk:()=>mt,vQ:()=>L});var l=t(90046),F=t.n(l),m=t(34740),P=t(19271),D=t(18643),T=t(24761),O=t(75257),S=t(2799),p=t(61712);const E="SET_BUILD_TIME",a="DELETE_DEPLOY_SUCCESS",s="WS_DEPLOY_CREATED",r="WS_DEPLOY_MODIFIED",c="WS_DEPLOY_DELETED";function d(h){return new Date(h).setMilliseconds(0)}const n=(0,D.Z)(E,(h,b,V)=>({id:h.get("id"),start:d(b),end:d(V)})),e=(0,D.Z)(a,h=>({deployId:h})),o=(0,D.Z)(s,h=>h),i=(0,D.Z)(r,h=>h),u=(0,D.Z)(c,h=>h),_=(0,T.P)("deploys"),f=(0,T.x)("deploys",_,{handler:(h,b)=>{const{type:V,payload:k}=b;switch(V){case E:return h.set(k.id,(0,l.fromJS)({build_time:{start:k.start,end:k.end,seconds:(k.end-k.start)/1e3}}));case a:const{deployId:g}=k;return h.withMutations(N=>{N.delete("pages"),N.deleteIn(["entities",g]),N.delete(g)});case s:return(0,O.qK)(h,k);case r:return(0,O.Rt)(h,k);case c:return(0,O.GM)(h,k);default:return null}}}),v={state:"pending_review"};function K(h,b={}){return[h.get("id"),b.state||"",b.filter||"",b.page||1].join("-")}function U(h,b,V){return n(h,b,V)}function M(h){return(0,S.p5)((b,V,k)=>k.deploy(h).then(g=>(b(_.deploySuccess(g.data)),Z(V(),h))))}function W(h,b={}){return(0,S.p5)((V,k,g)=>g.deploys(h.get("id"),b).then(N=>V(_.deploysSuccess(K(h,b),N.data,N.pagination))))}function j(h){return W(h,v)}function ct(h,b={}){return(0,S.p5)((V,k,g)=>Promise.all([V(W(h,b)),V(j(h))]))}function ot(h,b){const V=h.get("id");return(0,S.p5)((k,g,N)=>N.triggerDeploy(V,b).then(X=>{k((0,P.VF)(`/sites/${h.get("name")}/deploys/${X.data.deploy_id}`))}))}function Et(h,b){const V=h.get("id");return withApi((k,g,N)=>N.triggerDeploy(V,b))}function Y(h,b,V){const k=b.get("id"),g=h.get("name");return(0,S.p5)((N,X,St)=>V(St,k).then(gt=>N(_.deploySuccess(gt.data))).then(()=>N((0,p.EQ)(g))))}function at(h,b){return Y(h,b,(V,k)=>V.publishDeploy(k))}function $(h,b){return Y(h,b,(V,k)=>V.lockDeploy(k))}function x(h,b){return Y(h,b,(V,k)=>V.unlockDeploy(k))}function rt(h,b){return Y(h,b,(V,k)=>V.cancelDeploy(k))}function L(h,b){const V=b==null?void 0:b.get("id");return(0,S.p5)((k,g,N)=>N.deleteDeploy(V).then(()=>k(e(V))))}function B(h,b,V){const k=b.get("id"),g=h.get("name");return(0,S.p5)((N,X,St)=>St.retryDeploy(k,V).then(()=>m.mW.push(`/sites/${g}/deploys`)))}function tt(h){return(0,S.p5)((b,V,k)=>k.acceptDeploy(h).then(g=>b(_.deploySuccess(g.data))))}function q(h){return(0,S.p5)((b,V,k)=>k.rejectDeploy(h).then(g=>b(_.deploySuccess(g.data))))}function ut(h,b,V){const{perPage:k}=V,g=h.deploys.getIn(["pages",K(b,V),"ids"]),N=g&&g.map(X=>Z(h,X));return N&&k?N.take(k):N}function y(h,b,V){return h.deploys.getIn(["pages",K(b,V)])}function Z(h,b){const V=h.deploys.getIn(["entities",b]);return V&&V.merge(h.deploys.get(b))}function Q(h,b){return ut(h,b,{filter:b.getIn(["build_settings","repo_branch"])})}function et(h,b){return ut(h,b,v)}function st(h,b){return(Q(h,b)||(0,l.List)()).first()}const mt=(h,b)=>V=>{if((b.page||1)===1){const g=K((0,l.fromJS)({id:h.get("site_id")}),b);V(o(h.set("listKey",g)))}},pt=(h,b)=>V=>{const k=K((0,l.fromJS)({id:h.get("site_id")}),b);h.get("state")==="deleted"?V(u(h.set("listKey",k))):V(i(h))}},88688:(_t,z,t)=>{t.d(z,{TB:()=>a,h5:()=>c,kr:()=>n,m:()=>s,od:()=>o,pZ:()=>r,ul:()=>d});var l=t(18643),F=t(24761),m=t(2799);const P="DNS_RECORD_CREATED",D="DNS_RECORD_DELETED",T="DNS_RECORDS_DELETED",O="DNS_RECORDS_CLEAR_PAGES",S=(0,F.P)("dnsRecords"),p=(0,l.Z)(P,(i,u)=>({domain:i,id:u})),E=(0,l.Z)(D,(i,u)=>({domain:i,id:u})),a=(0,l.Z)(D,i=>({domain:i})),s=(0,l.Z)(O);function r(i){return(0,m.p5)((u,_,f)=>f.dnsRecords(i).then(({data:v,pagination:K})=>u(S.dnsRecordsSuccess(i,v,K))))}function c(i,u){return(0,m.p5)((_,f,v)=>v.createDnsRecord(i.get("name"),u).then(({data:K})=>{_(S.dnsRecordSuccess(K)),_(p(i.get("name"),K.id))}))}function d(i,u){return(0,m.p5)((_,f,v)=>v.destroyDnsRecord(i.get("name"),u.get("id")).then(K=>_(E(i.get("name"),u.get("id")))))}const n=(0,F.x)("dnsRecords",S,{handler:(i,u)=>{switch(u.type){case P:return i.updateIn(["pages",u.payload.domain,"ids"],_=>_.push(u.payload.id));case D:return i.updateIn(["pages",u.payload.domain,"ids"],_=>_.filter(f=>f!==u.payload.id)).deleteIn(["entities",u.payload.id]);case T:return i.deleteIn(["pages",u.payload.domain]);case O:return i.delete("pages");default:return null}}});function e(i,u){return i.dnsRecords.getIn(["entities",u])}function o(i,u){const _=i.dnsRecords.getIn(["pages",u,"ids"]);return _&&_.map(f=>e(i,f))}},53465:(_t,z,t)=>{t.d(z,{Aw:()=>_,BC:()=>K,Fg:()=>L,Go:()=>$,HJ:()=>U,Hw:()=>ut,RY:()=>M,Rr:()=>q,S4:()=>Et,XP:()=>B,aL:()=>f,dI:()=>tt,gi:()=>ot,jx:()=>x,ql:()=>ct,rG:()=>rt,vL:()=>W,vm:()=>v,x8:()=>j});var l=t(90046),F=t.n(l),m=t(18643),P=t(24761),D=t(43971),T=t(93967),O=t(2799),S=t(4310),p=t(88688),E=t(61712);function a(y){return y&&y.get("slug")||null}const s="DNS_VERIFIED",r="DNSZONE_DELETED",c="DNSZONES_CLEAR_PAGES",d="DOMAIN_TOGGLE_AUTO_RENEW",n=(0,P.P)("dnsZones"),e=(0,m.Z)(s,(y,Z)=>({domain:y,results:Z})),o=(0,m.Z)(r,y=>({domain:y})),i=(0,m.Z)(c),u=(0,m.Z)(d);function _(y){const Z=a(y);return(0,O.p5)((Q,et,st)=>st.dnsZones(Z).then(mt=>Q(n.dnsZonesSuccess(Z,mt.data,mt.pagination))))}function f(y){return(0,O.p5)((Z,Q,et)=>et.dnsZone(y).then(({data:st})=>{Z(n.dnsZoneSuccess(st)),Z((0,p.pZ)(y))}).catch(st=>st.code===404||st.code===401?Z(n.dnsZoneSuccess({name:y,error:st})):Promise.reject(st)).then(st=>B(Q(),y)))}function v(y){return(Z,Q)=>{const et=y.get("custom_domain");return et?(0,D.hh)(et).then(st=>st&&Z(f(`${st.domain}.${st.tld}`))):Promise.resolve()}}function K(y,{account:Z,site:Q}){return(0,O.p5)((et,st,mt)=>(et((0,p.m)()),mt.dnsZone(y).then(({data:pt})=>pt.account_id!==(Z&&Z.get("id"))?Promise.reject(new T.Z("must be unique")):(et(n.dnsZoneSuccess(pt)),et((0,p.pZ)(pt.name)),B(st(),pt.name))).catch(pt=>{switch(pt.code){case 404:return et(W(y,{account:Z,site:Q}));case 401:return Promise.reject(new T.Z("must be unique"));default:return Promise.reject(pt)}})))}function U(y,{account:Z,site:Q}){const et=Q&&Q.get("id");return(0,O.p5)((st,mt,pt)=>pt.buyDomain(y,Z.get("id"),et).then(({data:h})=>(st(f(h.domain)),et&&st((0,E.EQ)(Q.get("name"))),{data:h})))}function M(y,{account:Z}){return(0,O.p5)((Q,et,st)=>st.searchDomain(y,Z.get("id")).then(({data:mt})=>mt))}function W(y,{account:Z,site:Q}){return(0,O.p5)((et,st,mt)=>mt.createDnsZone(y,Z.get("slug"),{site_id:Q&&Q.get("id")}).then(({data:pt})=>(et(n.dnsZoneSuccess(pt)),et((0,p.pZ)(pt.name)),et(i()),B(st(),pt.name))))}function j(y,Z){return(0,O.p5)((Q,et,st)=>st.destroyDnsZone(y.get("id")).then(mt=>{const pt=y.get("name");Q(o(pt)),Q((0,p.TB)(pt))}))}function ct(y,Z){return(0,O.p5)((Q,et,st)=>{const mt=y.get("name");return st.transferDnsZone(mt,{account_id:y.get("account_id"),transfer_account_id:Z.get("id"),transfer_user_id:(0,S.HF)(et()).get("id")}).then(pt=>Q(f(mt)))})}function ot(y,Z){return(Q,et)=>Q((0,E.L3)(y,Z))}function Et(y,Z){const Q=y.get("name"),et=y.get("account_id");return(0,O.p5)((st,mt,pt)=>pt.toggleDomainAutoRenew(Q,et,Z).then(()=>st(u({domain:Q,autorenew:Z}))))}function Y(y){return y.json().then(Z=>y.ok?Z:Promise.reject(new T.Z(Z||{})))}function at(y){return(0,D.hh)(y).then(Z=>{const{subdomain:Q,domain:et,tld:st}=Z||{},mt=Z?`${et}.${st}`:y,pt=[y];return Z&&!Q?pt.push(`www.${mt}`):Q==="www"&&pt.push(mt),{root:mt,subdomain:Q,results:pt.map(b=>({domain:b,result:!1,error:"We couldn\u2019t resolve the domain. Request timed out"}))}})}function $(y,Z){return(Q,et)=>{const st=!Z&&tt(et(),y);return st&&st.getIn(["results",0,"result"])?Promise.resolve(st):fetch(`/.netlify/functions/verify?domain=${y}`).then(pt=>Y(pt)).then(pt=>Q(e(y,pt))).catch(pt=>at(y).then(h=>Q(e(y,h)))).then(()=>tt(et(),y))}}function x(y){return(Z,Q)=>{const et=y.get("custom_domain");return et?Z($(et)):Promise.resolve()}}const rt=(0,P.x)("dnsZones",n,{key:"name",handler:(y,Z)=>{switch(Z.type){case s:return y.set(Z.payload.domain,(0,l.fromJS)(Z.payload.results));case r:return y.deleteIn(["entities",Z.payload.domain]).delete("pages");case c:return y.delete("pages");case d:return y.setIn(["entities",Z.payload.domain,"domain","auto_renew"],Z.payload.autorenew);default:return null}}});function L(y,Z){const Q=y.dnsZones.getIn(["pages",a(Z),"ids"]);return Q&&Q.map(et=>B(y,et))}function B(y,Z){const Q=y.dnsZones.getIn(["entities",Z]);return Q&&Q.get("id")?Q.set("records",(0,p.od)(y,Z)):Q}function tt(y,Z){return y.dnsZones.get(Z)}function q(y){return(0,O.p5)((Z,Q,et)=>et.enableDnsZoneIPv6(y.get("id")).then(({data:st})=>{Z(n.dnsZoneSuccess(st)),Z((0,p.pZ)(y.get("name")))}))}function ut(y,Z){return(0,O.p5)((Q,et,st)=>st.enableDedicatedDns(y.get("id")).then(({data:mt})=>{Q(n.dnsZoneSuccess(mt))}))}},67115:(_t,z,t)=>{t.d(z,{y:()=>P});var l=t(90046),F=t.n(l),m=t(69969);function P(D=(0,l.Map)(),T){switch(T.type){case m.sz:return(0,l.Map)({active:!0});case m.Bs:return(0,l.Map)({active:!1});default:return D}}},69969:(_t,z,t)=>{t.d(z,{Bs:()=>a,QS:()=>_,Tu:()=>i,Xs:()=>r,f$:()=>s,sz:()=>E,ws:()=>u});var l=t(19271),F=t(18643),m=t(10583),P=t(76352),D=t(41862),T=t(2799),O=t(4310),S=t(61712),p=t(43455);const E="START_DRAG",a="END_DRAG",s=(0,F.Z)(E),r=(0,F.Z)(a),c=f=>(0,P.D$)("drop-token",f),d=()=>(0,P.le)("drop-token"),n=f=>!!(0,O.HF)(f()),e=f=>(v,K)=>{const U=(0,m.uW)(K()),M=(0,D.fd)(U)&&(U==null?void 0:U.get("slug"));return v((0,S.UJ)(M)).then(W=>{const j=(0,P.le)("nf-drop-force-anon")==="true";return v((0,S.mV)(W,f,j))})},o=f=>(0,T.p5)((v,K,U)=>U.dropToken().then(M=>M.data.token).then(M=>U.dropFiles((0,S.CJ)(f),M).then(W=>({token:M,deploy:W.data}))).then(({token:M,deploy:W})=>(0,S.Pr)(U,W,f,M).then(()=>U.waitForSiteDeploy(W.subdomain)).then(j=>({token:M,site:j.data}))).then(({site:M,token:W})=>{c(W),v(S.Nw.siteSuccess(M)),v((0,S.wM)(M.name)),v((0,l.VF)(`/drop/${M.name}`)),i()})),i=()=>{(0,P.e8)("dropDeployId"),(0,P.e8)("dropSiteName"),(0,P.e8)("dropUploadInterrupted")},u=f=>(v,K)=>v(n(K)?e(f):o(f)),_=(f,v=d())=>(0,T.p5)((K,U,M)=>{const{name:W,id:j,claimed:ct}=f.toJS(),ot=`/sites/${W}`,Et=`/signup?next=${window.location.pathname}&utm_campaign=drop`;return n(U)?ct?K((0,l.VF)(ot)):M.dropClaim(j,v).then(()=>K((0,S.EQ)(W))).then(()=>{(0,P.e8)("drop-token"),K((0,l.VF)(ot))}).catch(()=>{}):K((0,p.Ee)(Et))})},31897:(_t,z,t)=>{t.d(z,{Fl:()=>S,O9:()=>O,kZ:()=>p});var l=t(90046),F=t.n(l),m=t(18643),P=t(2799);const D="EDGE_FUNCTIONS_SUCCESS",T=(0,m.Z)(D,(E,a)=>({deployId:E,data:a}));function O(E){return(0,P.p5)((a,s,r)=>r.edgeFunctions(E).then(c=>{a(T(E,c.data))}))}function S(E=(0,l.Map)(),a){switch(a.type){case D:{const{deployId:s,data:{edge_functions:r}}=a.payload;return E.setIn(["entities",s],r)}default:return E}}function p(E,a){return E.edgeFunctions.get("entities")?E.edgeFunctions.get("entities").get(a):[]}},8513:(_t,z,t)=>{t.d(z,{C7:()=>a,M2:()=>s,WZ:()=>r,Y0:()=>n,bJ:()=>d,f6:()=>c,jB:()=>E,wB:()=>p,wY:()=>O});var l=t(24761),F=t(10583),m=t(2799),P=t(61712);const D="environmentVariables",T=(0,l.P)(D),O=(0,l.x)(D,T,{key:"key"});function S(e,o){return e.environmentVariables.getIn(["entities",o]).toJS()}function p(e,o){const i=e.environmentVariables.getIn(["pages",o,"ids"]);return i&&i.map(u=>S(e,u)).toJS()}function E(e,o){return e.environmentVariables.getIn(["pages",o,"isFetching"])}function a(e,o){return e.environmentVariables.getIn(["pages",o,"error"])}function s({accountId:e,siteId:o,scope:i,context:u,merge:_}){return(0,m.p5)((f,v,K)=>(f(T.environmentVariablesRequest(o||e)),K.getEnvVarsFromEnvelope({accountId:e,siteId:o,scope:i,context:u,merge:_}).then(U=>f(T.environmentVariablesSuccess(o||e,U.data,U.pagination))).catch(U=>{Promise.reject(U),f(T.environmentVariablesFailure(o||e,U))})))}function r({accountId:e,siteId:o}){return(0,m.p5)((i,u,_)=>!e||!o?Promise.reject():_.migrateEnvVarsToEnvelope({accountId:e,siteId:o}).then(f=>{i((0,P.EQ)(o)),i((0,F.Mx)(e)),i(s({accountId:e,siteId:o}))}).catch(f=>Promise.reject(f)))}function c({accountId:e,siteId:o,envVars:i}){return(0,m.p5)((u,_,f)=>f.createEnvVarsForEnvelope({accountId:e,siteId:o,envVars:i}).then(v=>u(s({accountId:e,siteId:o}))).catch(v=>Promise.reject(v)))}function d({accountId:e,siteId:o,oldKey:i,newKey:u,scopes:_,values:f}){return(0,m.p5)((v,K,U)=>U.updateEnvVarInEnvelope({accountId:e,siteId:o,oldKey:i,newKey:u,scopes:_,values:f}).then(M=>v(s({accountId:e,siteId:o}))).catch(M=>Promise.reject(M)))}function n({accountId:e,siteId:o,key:i,id:u}){return(0,m.p5)((_,f,v)=>v.deleteEnvVarFromEnvelope({accountId:e,siteId:o,key:i,id:u}).then(K=>_(s({accountId:e,siteId:o}))).catch(K=>Promise.reject(K)))}},69264:(_t,z,t)=>{t.d(z,{$d:()=>u,A:()=>s,Hk:()=>S,Jo:()=>e,Rg:()=>i,XL:()=>n,cJ:()=>d,cY:()=>T,dI:()=>c,jn:()=>p,jy:()=>o,zH:()=>r});var l=t(14938),F=t.n(l),m=t(24761),P=t(2799);const D=(0,m.P)("forms"),T=(0,m.x)("forms",D),O=(0,m.P)("submissions"),S=(0,m.x)("submissions",O);function p(f){const v=f.get("id");return(0,P.p5)((K,U,M)=>M.siteForms(v).then(W=>K(D.formsSuccess(v,W.data,W.pagination))))}function E(f,v){return withApi((K,U,M)=>M.siteForm(v).then(W=>K(D.formSuccess(W.data))))}function a(f,v={}){return v.formId?v.formId:`site-${f.get("id")}`}function s(f,v){const K=f.get("id");return(0,P.p5)((U,M,W)=>(U(p(f)),W.formSubmissions(K,v).then(j=>U(O.submissionsSuccess(a(f,v),j.data,j.pagination)))))}function r(f,v,K){const U=f.get("id");return(0,P.p5)((M,W,j)=>{const ct=F()(F().n(10),ot=>j.deleteFormSubmission(U,ot));return Promise.all(v.map(ot=>ct(ot))).then(ot=>M(s(f,K)))})}function c(f,v){const K=f.get("id");return(0,P.p5)((U,M,W)=>W.deleteForm(K,v))}function d(f,v,K){const U=f.get("id");return(0,P.p5)((M,W,j)=>{const ct=F()(F().n(10),ot=>j.markSubmissionAsHam(U,ot));return Promise.all(v.map(ot=>ct(ot))).then(ot=>{M(s(f,K))})})}function n(f,v,K){const U=f.get("id");return(0,P.p5)((M,W,j)=>{const ct=F()(F().n(10),ot=>j.markSubmissionAsSpam(U,ot));return Promise.all(v.map(ot=>ct(ot))).then(ot=>{M(s(f,K))})})}function e(f,v){const K=f.forms.getIn(["pages",v.get("id"),"ids"]);return K&&K.map(U=>f.forms.getIn(["entities",U]))}function o(f,v){return f.forms.getIn(["entities",v])}function i(f,v,K){const U=f.submissions.getIn(["pages",a(v,K),"ids"]);return U&&U.map(M=>f.submissions.getIn(["entities",M]))}function u(f,v,K){return f.submissions.getIn(["pages",a(v,K)])}function _(f,v){return f.submissions.getIn(["entities",v])}},99927:(_t,z,t)=>{t.d(z,{X4:()=>c,ZF:()=>r,lf:()=>s,rm:()=>a,tZ:()=>S});var l=t(90046),F=t.n(l),m=t(24761),P=t(11212),D=t(2799);const T="functionLogs",O=(0,m.P)(T),S=(0,m.x)(T,O,{getKey:(d,n)=>`${d.ts}-${d.requestId}-${n}`});function p(d,n,e={}){return[d,n,e.branch||"",e.cursor||"",e.q||"",e.from||"",e.to||""].filter(Boolean).join("-")}function E(d,n){const e=d.functionLogs.getIn(["entities",n]);return e&&e.merge(d.functionLogs.get(n))}function a(d,n,e,o={}){const i=d.functionLogs.getIn(["pages",p(n,e,o),"ids"]);return i&&i.map(u=>E(d,u))}function s(d,n,e,o){return!!d.functionLogs.getIn(["pages",p(n,e,o),"isFetching"])}function r(d,n,e,o){return d.functionLogs.getIn(["pages",p(n,e,o),"next"])}function c(d,n,e){const o={branch:e.branch,cursor:e.cursor,q:e.q,from:e.from,to:e.to};return(0,P.wi)((i,u,_)=>{const f=p(d,n,o);return i(O.functionLogsRequest(f)),_.historicalFunctionLogs({site_id:d,name:n,branch:e.branch,from:e.from,to:e.to,next_cursor:e.next_cursor,search:e.q}).then(v=>{const K=u(),U=a(K,d,n,e)||(0,l.List)(),M=[...U==null?void 0:U.toJS(),...v.data.logs];return i(O.functionLogsSuccess(f,M,v.pagination))}).catch(v=>new D.Hx(v))})}},93969:(_t,z,t)=>{t.d(z,{Bc:()=>a,Ph:()=>S,ob:()=>s,wk:()=>p,x0:()=>E});var l=t(90046),F=t.n(l),m=t(18643),P=t(2799);const D="FUNCTIONS_SUCCESS",T=(0,l.fromJS)({id:"empty",functions:[]}),O=(0,m.Z)(D,(r,c,d)=>({siteId:r,scope:c,data:d}));function S(r,c){const d=r.get("id");return(0,P.p5)((n,e,o)=>o.functions(d,c).then(i=>{n(O(d,c,i.data))}))}function p(r=(0,l.Map)(),c){switch(c.type){case D:{const{siteId:d,scope:n="default",data:e}=c.payload,o=e&&e.id?(0,l.fromJS)(e):T;return r.setIn(["entities",o.get("id")],o).setIn(["pages",d,n],o.get("id"))}default:return r}}function E(r,c,d){d=d||"default";const n=r.functions.getIn(["pages",c.get("id"),d]);return n&&r.functions.getIn(["entities",n])}function a(r,c,d){const n=E(r,c,d);return n&&n.get("functions").map(e=>e.set("c",e.get("c")||n.get("created_at")))}function s(r,c,d,n){const e=a(r,c,d);return e&&e.find(o=>o.get("n")===n)}},87883:(_t,z,t)=>{t.d(z,{$_:()=>d,Cl:()=>r,Fq:()=>n,Gu:()=>_,Kd:()=>e,L4:()=>i,Lb:()=>v,YR:()=>o,fc:()=>s,oI:()=>u,qq:()=>f,z8:()=>K});var l=t(90046),F=t.n(l),m=t(18643),P=t(29861),D=t(10345),T=t(4310);const O="GIT_NO_PROVIDER",S="GIT_SET_PROVIDER",p="GIT_SET_SEARCH_TERM",E="GIT_SET_USER",a=(0,m.Z)(O),s=(0,m.Z)(S,(U,M)=>({provider:U,credentials:M})),r=(0,m.Z)(p,U=>U),c=(0,m.Z)(E,U=>U);function d(U){return(M,W)=>{const j=(0,D.Ev)(W());return j?U(M,W,j):M(a())}}function n(U,M){let W=!1;return U==="github-proxied"&&(U=P.CB.github,W=!0),(j,ct)=>{const ot=ct().git,Et=ot&&U===ot.get("provider")?(0,D.Wx)(U,ot.get("accessToken"),ot.get("apiEndpoint")):(0,D.Wx)(U);return Et?(W&&(Et.root="/.netlify/functions/git"),M(j,ct,Et)):j(a())}}function e(){return d((U,M,W)=>W.user().then(j=>(U(c(j.data)),K(M()))))}function o(U){return(M,W)=>M((0,T.YR)(U)).then(()=>M(e()))}function i(U=(0,l.Map)(),M){switch(M.type){case S:const W={provider:M.payload.provider,accessToken:M.payload.credentials.token};return M.payload.credentials.refresh_token&&(W.refreshAccessToken=M.payload.credentials.refresh_token),M.payload.credentials.api_endpoint&&(W.apiEndpoint=M.payload.credentials.api_endpoint),(0,l.fromJS)(W);case p:return U.set("search",M.payload);case E:return U.set("user",(0,l.fromJS)(M.payload));default:return U}}function u(U){return U.git.get("provider")}function _(U){return U.git.get("accessToken")}function f(U){return U.git.get("apiEndpoint")}function v(U){return U.git.get("search")}function K(U){return U.git.get("user")}},84319:(_t,z,t)=>{t.d(z,{Ht:()=>D,YX:()=>T,hi:()=>P,wc:()=>O});var l=t(24761),F=t(87883);const m=(0,l.P)("gitOrganizations");function P(){return(0,F.$_)((S,p,E)=>{S(m.gitOrganizationsRequest(E.provider));const s=p().git.getIn(["user","login"]);E.organizations({userLogin:s}).then(r=>S(m.gitOrganizationsSuccess(E.provider,r.data,r.pagination)),r=>S(m.gitOrganizationsFailure(E.provider,r)))})}const D=(0,l.x)("gitOrganizations",m,{key:"full_name"});function T(S){const p=(0,F.oI)(S),E=S.gitOrganizations.getIn(["pages",p,"ids"]);return E&&E.map(a=>O(S,a))}function O(S,p){return S.gitOrganizations.getIn(["entities",p])}},5964:(_t,z,t)=>{t.d(z,{W:()=>D,Y:()=>O});var l=t(2799);const F=new Map,m=1e3*60*5;function P(S){return"jwt"in S&&S.expiration-m<performance.now()}function D({siteId:S}){return(0,l.p5)(function(p,E,a){const s=F.get(S);if(s&&!P(s))return Promise.resolve(s);const r=a.graphJwt(S).then(({data:c})=>{const d=c.jwt,n=d.split(".")[1].replace(/_/g,"/").replace(/-/g,"+"),e=JSON.parse(atob(n)),o=e.exp-e.iat,i=performance.now()+o*1e3;return F.set(S,{jwt:d,expiration:i}),{jwt:d,expiration:i}}).catch(c=>{throw F.delete(S),c});return F.set(S,r),r})}const T=async({siteId:S})=>{const p=`/access-control/bb-api/api/v1/sites/${S}/jwt`,E=await fetch(p,{headers:{"Content-type":"application/json"},credentials:"include"});if(E.status===200)return await E.json();throw new Error(`Non-200 status when exchanging API token for short-lived JWT: ${E.status}`)};function O({siteId:S}){const p=F.get(S);if(p&&!P(p))return Promise.resolve(p);const E=T({siteId:S}).then(a=>{const s=a.jwt,r=s.split(".")[1].replace(/_/g,"/").replace(/-/g,"+"),c=JSON.parse(atob(r)),d=c.exp-c.iat,n=performance.now()+d*1e3;return F.set(S,{jwt:s,expiration:n}),{jwt:s,expiration:n}}).catch(a=>{throw F.delete(S),a});return F.set(S,E),E}},24761:(_t,z,t)=>{t.d(z,{P:()=>T,x:()=>O});var l=t(90046),F=t.n(l),m=t(17412),P=t.n(m),D=t(18643);function T(S){const p=S,E=(0,m.singularize)(S),a=p.toUpperCase(),s=E.toUpperCase(),r={},c={REQUEST:s+"_REQUEST",SUCCESS:s+"_SUCCESS",FAILURE:s+"_FAILURE"},d={REQUEST:a+"_REQUEST",SUCCESS:a+"_SUCCESS",FAILURE:a+"_FAILURE"};return r[s]=c,r[a]=d,r[`${E}Request`]=(0,D.Z)(c.REQUEST,n=>n),r[`${E}Success`]=(0,D.Z)(c.SUCCESS,n=>n),r[`${E}Failure`]=(0,D.Z)(c.FAILURE,(n,e)=>({id:n,error:e})),r[`${p}Request`]=(0,D.Z)(d.REQUEST,n=>n),r[`${p}Success`]=(0,D.Z)(d.SUCCESS,(n,e,o)=>({list:n,entities:e,pages:o})),r[`${p}Failure`]=(0,D.Z)(d.FAILURE,(n,e)=>({list:n,error:e})),r}function O(S,p,E={}){const a=S,s=(0,m.singularize)(S),r=a.toUpperCase(),c=s.toUpperCase();return(d=(0,l.Map)({entities:(0,l.Map)(),pages:(0,l.Map)()}),n)=>{const e=E.handler&&E.handler(d,n);if(e)return e;const o=E.key||"id",i=E.getKey||(u=>u[o]);switch(n.type){case p[c].REQUEST:return d.setIn(["entities",n.payload,"isFetching"],!0);case p[c].SUCCESS:{const u=i(n.payload).toString(),_=d.getIn(["entities",u])||(0,l.Map)();return d.setIn(["entities",u],_.merge(n.payload,{isFetching:!1}))}case p[c].FAILURE:return d.withMutations(u=>{u.setIn(["entities",n.payload.id,"error"],(0,l.fromJS)(n.payload.error)).setIn(["entities",n.payload.id,"isFetching"],!1)});case p[r].REQUEST:return d.setIn(["pages",n.payload,"isFetching"],!0);case p[r].SUCCESS:{const{list:u,entities:_,pages:f}=n.payload;return d.withMutations(v=>{_.forEach((K,U)=>v.setIn(["entities",i(K,U).toString()],(0,l.fromJS)(K).set("isFetching",!1))),v.setIn(["pages",u],(0,l.Map)({...f,ids:(0,l.List)(_.map((K,U)=>i(K,U).toString()))}))})}case p[r].FAILURE:return d.setIn(["pages",n.payload.list,"error"],(0,l.fromJS)(n.payload.error));default:return d}}}},39588:(_t,z,t)=>{t.d(z,{$_:()=>E,Bi:()=>S,Eq:()=>a,PT:()=>s,e_:()=>c,ny:()=>p,o6:()=>d,v9:()=>O});var l=t(90046),F=t.n(l),m=t(24761),P=t(2799);const D=(0,m.P)("hooks"),T="HOOK_TYPES";function O(e){return(0,P.p5)((o,i,u)=>(o(D.hooksRequest(e.get("id"))),u.hooks(e.get("id")).then(_=>o(D.hooksSuccess(e.get("id"),_.data,_.pagination)),_=>o(D.hooksFailure(e.get("id"),_.message)))))}function S(e,o){const i={site_id:e.get("id"),event:o.event,type:o.type,data:o.data,form_id:o.form_id};return(0,P.p5)((u,_,f)=>f.addHook(i).then(v=>{u(O(e))}))}function p(e,o,i){const u=o.get("id");return(0,P.p5)((_,f,v)=>v.updateHook(u,i).then(K=>K.data.disabled?v.enableHook(u):Promise.resolve(K)).then(()=>_(O(e))))}function E(e,o){return(0,P.p5)((i,u,_)=>_.deleteHook(o.get("id")).then(f=>i(O(e))))}function a(e){return(0,P.p5)((o,i,u)=>u.hookTypes(e.get("id")).then(_=>o({type:T,payload:{siteId:e.get("id"),types:_.data}})))}const s=(0,m.x)("hooks",D,{handler:(e,o)=>{switch(o.type){case T:return e.setIn(["types",o.payload.siteId],(0,l.fromJS)(o.payload.types));default:return null}}});function r(e,o){return e.hooks.getIn(["entities",o])}function c(e,o){const i=e.hooks.getIn(["pages",o.get("id"),"ids"]);return i&&i.map(u=>r(e,u))}function d(e,o){return e.hooks.getIn(["types",o.get("id")])}function n(e,o,i){const u=d(e,o);return u&&u.find(_=>_.get("name")===i)}},53478:(_t,z,t)=>{t.d(z,{$O:()=>j,EI:()=>K,Ey:()=>Y,FJ:()=>M,PO:()=>u,XD:()=>v,bU:()=>ct,cG:()=>at,dU:()=>U,dk:()=>i,eO:()=>o,jZ:()=>e,mK:()=>W,mt:()=>ot,qD:()=>d,r6:()=>f,yR:()=>n});var l=t(90046),F=t.n(l),m=t(19271),P=t(18643),D=t(24761),T=t(37421),O=t(2799),S=t(61712);const p="IDENTITY_CREATED",E="IDENTITY_SUCCESS",a=(0,D.P)("identityUsers"),s=(0,P.Z)(p,($,x)=>({siteId:$,data:x})),r=(0,P.Z)(E,($,x)=>({siteId:$,data:x})),c=($,{filter:x})=>`${$}${x?`-${x}`:""}`,d=(0,D.x)("identityUsers",a);function n($=(0,l.Map)(),x){switch(x.type){case p:case E:return $.set(x.payload.siteId,(0,l.fromJS)(x.payload.data));default:return $}}function e($,x){return $.identity.get(x.get("id"))}function o($,x){return $.identityUsers.getIn(["entities",x])}function i($,x,rt){const L=$.identityUsers.getIn(["pages",c(x.get("id"),rt),"ids"]);return L&&L.map(B=>o($,B))}function u($,x,rt){return $.identityUsers.getIn(["pages",c(x.get("id"),rt)])}function _($,x,rt){const L=e(rt(),$);return L?Promise.resolve(L):x(f($)).then(()=>e(rt(),$))}function f($){const x=$.get("id"),rt=$.get("identity_instance_id");return(0,O.p5)((L,B,tt)=>rt?tt.identity(x,rt).then(q=>L(r(x,q.data))):Promise.resolve())}function v($,x={}){const rt=$.get("id");return(0,O.p5)((L,B,tt)=>tt.createIdentity(rt,x).then(q=>L(s(rt,q.data))).then(()=>L((0,S.EQ)($.get("name")))).then(q=>L((0,S.ZO)(q))))}function K($,x){const rt=$.get("id"),L=$.get("identity_instance_id");return(0,O.p5)((B,tt,q)=>L?q.updateIdentity(rt,L,x).then(()=>B(f($))):Promise.reject({code:404}))}function U($){const x=$.get("id"),rt=$.get("identity_instance_id");return(0,O.p5)((L,B,tt)=>rt?tt.deleteIdentity(x,rt).then(()=>L((0,S.EQ)($.get("name")))):Promise.resolve())}function M($,x={}){const rt=$.get("id"),L=$.get("identity_instance_id");return(0,O.p5)((B,tt,q)=>L?q.identityUsers(rt,L,x).then(ut=>B(a.identityUsersSuccess(c(rt,x),ut.data,ut.pagination))).catch(ut=>ut.code===404?B(a.identityUsersSuccess(c(rt,x),[],{})):Promise.reject(ut)):Promise.resolve())}function W($,x){const rt=$.get("id"),L=$.get("identity_instance_id");return(0,O.p5)((B,tt,q)=>L?_($,B,tt).then(()=>q.identityUser(rt,L,x).then(ut=>B(a.identityUserSuccess(ut.data)))):Promise.reject({code:404}))}function j($,x){const rt=$.get("id"),L=$.get("identity_instance_id");return(0,O.p5)((B,tt,q)=>q.createIdentityUser(rt,L,x).then(ut=>B(M($))))}function ct($,x,rt){const L=$.get("id"),B=$.get("identity_instance_id"),tt=x.get("id");return(0,O.p5)((q,ut,y)=>(q(Et($,rt)),y.updateIdentityUser(L,B,tt,rt).then(()=>q(W($,tt)))))}function ot($,x){const rt=$.get("id"),L=$.get("identity_instance_id"),B=x.get("id");return(0,O.p5)((tt,q,ut)=>ut.deleteIdentityUser(rt,L,B).then(()=>tt(M($))).then(()=>tt((0,m.VF)((0,T.DD)($,"identity")))))}function Et($,x){const rt=x&&x.app_metadata&&x.app_metadata.roles;return(0,O.p5)((L,B,tt)=>rt&&rt.length?_($,L,B).then(q=>{if(!q)return;const ut=(0,l.Set)(q.getIn(["external_attributes","roles"])),y=ut.merge(rt);y.size>ut.size&&L(K($,{external_attributes:{roles:y}}))}):Promise.resolve())}function Y($,x){const rt=$.get("id"),L=$.get("identity_instance_id"),B=x.get("id");return(0,O.p5)((tt,q,ut)=>ut.sendIdentityRecovery(rt,L,B))}function at($,x){const rt=$.get("id"),L=$.get("identity_instance_id");return(0,O.p5)((B,tt,q)=>q.sendIdentityInvites(rt,L,{invites:x}).then(()=>B(M($))))}},75225:(_t,z,t)=>{t.d(z,{Hi:()=>T,Y5:()=>S,bo:()=>E,iK:()=>p});var l=t(24761),F=t(2799);const m=(0,l.P)("identityAudits"),P=({siteId:a,searchTerm:s}={})=>`${a}${s?`-${s}`:""}`,D=a=>a.map(s=>(s&&s.payload&&s.payload.log_type&&(s.payload.log_type=`gotrue-${s.payload.log_type}`),s)),T=(0,l.x)("identityAudits",m);function O(a,s){return a.identityAudit.getIn(["entities",s])}function S(a,s){const r=a.identityAudit.getIn(["pages",P(s),"ids"]);return r&&r.map(c=>O(a,c))}function p(a,s){return a.identityAudit.getIn(["pages",P(s)])}function E(a){return(0,F.p5)((s,r,c)=>a.identityId&&a.isValidKey?c.identityAudit(a).then(d=>s(m.identityAuditsSuccess(P(a),D(d.data),d.pagination))).catch(d=>d.code===404?s(m.identityAuditsSuccess(P(a),[],{})):Promise.reject(d)):Promise.resolve())}},21479:(_t,z,t)=>{t.d(z,{V2:()=>D,Yx:()=>T,rI:()=>S,uX:()=>p});var l=t(24761),F=t(2799);const m=(0,l.P)("largeMediaAssets"),P=(E,{filter:a})=>`${E}${a?`-${a}`:""}`,D=(0,l.x)("largeMediaAssets",m);function T(E,a){const s=E.get("id"),r=E.get("use_lm");return(0,F.p5)((c,d,n)=>r?n.largeMediaAssets(s,a).then(e=>c(m.largeMediaAssetsSuccess(P(s,a),e.data,e.pagination))):Promise.resolve())}function O(E,a){return E.largeMediaAssets.getIn(["entities",a])}function S(E,a,s){const r=E.largeMediaAssets.getIn(["pages",P(a.get("id"),s),"ids"]);return r&&r.map(c=>O(E,c))}function p(E,a,s){return E.largeMediaAssets.getIn(["pages",P(a.get("id"),s)])}},60771:(_t,z,t)=>{t.d(z,{GO:()=>S,Lf:()=>D,SK:()=>p,V4:()=>s,X5:()=>E,b_:()=>T,cU:()=>O,vR:()=>a});var l=t(24761),F=t(2799);const m="logDrains",P=(0,l.P)(m),D=(0,l.x)(m,P);function T(r,c){var d,n;const[e]=((d=r.logDrains.getIn(["pages",c,"ids"]))==null?void 0:d.toJS())||[];return(n=r.logDrains.getIn(["entities",e]))==null?void 0:n.toJS()}function O(r,c){return r.logDrains.getIn(["pages",c,"isFetching"])}function S(r){return(0,F.p5)((c,d,n)=>(c(P.logDrainsRequest(r)),n.logDrains(r).then(e=>{(e.data||[]).forEach(o=>{const{url:i,integration_name:u}=o.service_config;i&&new URL(i).host.endsWith(".sumologic.com")&&(o.destination="sumologic"),u&&(o.destination=u)}),c(P.logDrainsSuccess(r,e.data))})))}function p(r,c={}){return(0,F.p5)((d,n,e)=>e.createLogDrain(r,c).then(o=>{d(P.logDrainsSuccess(r,[o.data]))}))}function E(r,c,d){return(0,F.p5)((n,e,o)=>o.verifyLogDrain(r,c,d).then(()=>{const i=e(),_={...T(i,r),verified:!0};n(P.logDrainsSuccess(r,[_]))}))}function a(r,c,d={}){return(0,F.p5)((n,e,o)=>o.updateLogDrain(r,c,d).then(i=>{n(P.logDrainsSuccess(r,[i.data]))}))}function s(r,c){return(0,F.p5)((d,n,e)=>e.deleteLogDrain(r,c).then(()=>{d(P.logDrainsSuccess(r,[]))}))}},64437:(_t,z,t)=>{t.d(z,{Ol:()=>p,Tq:()=>E,ad:()=>s,el:()=>T});var l=t(19271),F=t(24761),m=t(10583),P=t(2799);const D=(0,F.P)("members");function T(r){const c=r.get("id");return(0,P.p5)((d,n,e)=>(d(D.membersRequest(c)),e.members(c).then(o=>d(D.membersSuccess(c,o.data,o.pagination)))))}function O(r,c){return withApi((d,n,e)=>(d(D.membersRequest(r.get("id"))),Promise.all(c.map(o=>e.inviteMember(r.get("id"),o))).then(o=>d(T(r)),o=>d(T(r)))))}function S(r,c){return withApi((d,n,e)=>(d(D.membersRequest(r.get("id"))),e.removeMember(r.get("id"),c.get("id")).then(o=>d(T(r)))))}function p(r){return(0,P.p5)((c,d,n)=>n.acceptInvite(r).then(e=>{e.data.site_id?c((0,l.VF)(`/sites/${e.data.name}`)):c((0,m.vP)()).then(()=>c((0,l.VF)(`/teams/${e.data.slug}`)))}))}const E=(0,F.x)("members",D);function a(r,c){return r.members.getIn(["entities",c])}function s(r,c){const d=r.members.getIn(["pages",c.get("id"),"ids"]);return d&&d.map(n=>a(r,n))}},28534:(_t,z,t)=>{t.d(z,{Af:()=>p,B_:()=>E,Fd:()=>a,NK:()=>r,Vy:()=>c,WU:()=>d,jJ:()=>S,sv:()=>s});var l=t(90046),F=t.n(l),m=t(2799),P=t(4310);const D="MULTIFACTOR_AUTH_SETUP",T="MULTIFACTOR_AUTH_ENABLE",O="MULTIFACTOR_AUTH_DISABLE";function S(n=(0,l.fromJS)({}),e){switch(e.type){case D:return n.merge((0,l.fromJS)({setup:e.payload}));case T:return n.merge((0,l.fromJS)({isEnabled:!0,recoveryCodes:e.payload}));case O:return n.merge((0,l.fromJS)({isEnabled:!1,recoveryCodes:null}));default:return n}}function p(){return(0,m.p5)(async(n,e,o)=>{const{data:i}=await o.setupMultiFactorAuth();n({type:D,payload:i})})}function E({otp:n,token:e}){return(0,m.p5)(async(o,i,u)=>{const{data:_}=await u.enableMultiFactorAuth({otp:n,token:e});o({type:T,payload:_.backup_codes})})}function a({otp:n}){return(0,m.p5)(async(e,o,i)=>{const{data:u}=await i.disableMultiFactorAuth({otp:n});e({type:O,payload:u}),e((0,P.$D)({reload:!0}))})}function s({otp:n,token:e}){return(0,m.p5)(async(o,i,u)=>{const{data:_}=await u.verifyLogin({otp:n,token:e});window.location.href=_.redirect_path})}function r(n){const{multiFactorAuth:e}=n;return(e==null?void 0:e.get("setup"))||null}function c(n){const{user:e,multiFactorAuth:o}=n;return!!(o!=null&&o.get("isEnabled"))||!!(e!=null&&e.get("mfa_enabled"))||!1}function d(n){const{multiFactorAuth:e}=n;return e==null?void 0:e.get("recoveryCodes")}},10364:(_t,z,t)=>{t.d(z,{A7:()=>s,N9:()=>n,P$:()=>d,_6:()=>c,oA:()=>a,y9:()=>r});var l=t(90046),F=t.n(l),m=t(18643),P=t(74479),D=t(33640),T=t(93967),O=t(4310);const S="NOTIFICATIONS_SUCCESS",p=(0,m.Z)(S,e=>e);function E(e,o){const i=e.getIn(["onboarding_progress","notifications_read_at"]);return new Date(i)<new Date(o)}function a({page:e=1,perPage:o=10}={}){return(i,u)=>{fetch(`/.netlify/functions/notifications?page=${e}&per_page=${o}`).then(_=>{if(!_.ok)throw new Error(`Error fetching notifications - ${_.status} - ${_.statusText}`);return _.json().catch(f=>{throw new Error(`Error parsing notifications JSON - ${_.status}`)})}).then(_=>{i(p(_))}).catch(_=>{throw new T.Z(_.message||_)})}}function s(e){return(o,i)=>{const{accounts:u,user:_}=i(),f=e&&e.getIn([0,"updated_at"]);P.iN.appNotificationButtonClicked({accountSlug:u.get("selected"),flagged:E(_,f),notificationNames:e&&e.map(v=>(0,D.lV)(v==null?void 0:v.get("title"))).toJS()}),o((0,O.fq)("notifications_read_at",f))}}function r(e){return(o,i)=>{const{accounts:u}=i();P.iN.appNotificationItemClicked({accountSlug:u.get("selected"),notificationName:(0,D.lV)(e.get("title"))})}}function c(e){return e.notifications.get("data")}function d(e){const o=(0,O.HF)(e);return o&&o.getIn(["onboarding_progress","notifications_read_at"])}const n=(e=(0,l.Map)(),o)=>{switch(o.type){case S:return e.set("data",(0,l.fromJS)(o.payload));default:return e}}},4860:(_t,z,t)=>{t.d(z,{AN:()=>q,Ak:()=>et,Av:()=>x,FV:()=>st,Hh:()=>Y,Hp:()=>B,Ly:()=>ct,O1:()=>tt,Ov:()=>Et,P6:()=>rt,Pk:()=>ut,Q:()=>Z,RF:()=>v,Tz:()=>y,Ul:()=>K,W2:()=>pt,Wu:()=>j,_b:()=>M,cr:()=>Q,dm:()=>f,g8:()=>mt,j6:()=>ot,k:()=>u,mT:()=>L,mf:()=>o,nU:()=>_,p_:()=>at,u2:()=>W,vI:()=>U,yK:()=>i,yL:()=>$});var l=t(5780),F=t.n(l),m=t(90046),P=t.n(m),D=t(24761),T=t(93967),O=t(10583),S=t(2799),p=t(74092),E=t(43455);const a="organizations",s=(0,D.P)(a),r=(0,D.P)("organizationAccounts"),c=(0,D.P)("organizationInvoices"),d=(0,D.P)("organizationClientToken"),n=(0,D.P)("organizationReceipts"),e=(0,D.P)("organizationSaml"),o=(0,D.x)(a,s,{key:"slug"}),i=(0,D.x)("organizationAccounts",r),u=(0,D.x)("organizationInvoices",c),_=(0,D.x)("organizationReceipts",n,{key:"transaction_id"}),f=(0,D.x)("organizationSaml",e,{key:"list"});function v(h){return(0,S.p5)((b,V,k)=>(b(s.organizationRequest(h)),k.organization(h).then(g=>b(s.organizationSuccess(g.data))).catch(g=>b(s.organizationFailure(h,g)))))}function K(h){return(0,S.p5)((b,V,k)=>(b(r.organizationAccountsRequest(h)),k.organizationAccounts(h).then(g=>{b(r.organizationAccountsSuccess(h,g.data))}).catch(g=>b(r.organizationAccountsFailure(h,g)))))}function U(h){return(0,S.p5)((b,V,k)=>(b(c.organizationInvoicesRequest(h)),k.organizationInvoices(h).then(g=>b(c.organizationInvoicesSuccess(h,g.data))).catch(g=>b(c.organizationInvoicesFailure(h,g)))))}function M(h){return(0,S.p5)((b,V,k)=>(b(n.organizationReceiptsRequest(h)),k.organizationReceipts(h).then(g=>b(n.organizationReceiptsSuccess(h,g.data))).catch(g=>b(n.organizationReceiptsFailure(h,g)))))}function W(h){return(0,S.p5)((b,V,k)=>(b(d.organizationClientTokenRequest(h)),k.organizationClientToken(h).then(g=>(g.data.organization_id=h,b(d.organizationClientTokenSuccess(h,g.data)),g.data)).catch(g=>b(d.organizationClientTokenFailure(h,g)))))}function j(){return(0,S.p5)((h,b,V)=>(h(s.organizationsRequest(a)),V.organizations().then(k=>h(s.organizationsSuccess(a,k.data,k.pagination)),k=>h(s.organizationsFailure(a,k)))))}function ct(h){return(0,S.p5)((b,V,k)=>k.organizationSamlConnection(h).then(g=>(b(e.organizationSamlSuccess(h,g.data)),g.data)))}function ot(h){return(0,S.p5)((b,V,k)=>k.organizationSamlDashboard(h).then(({data:g})=>g.workos_portal_url))}function Et(h){return(0,S.p5)((b,V,k)=>k.organizationSamlDeleteConnection(h).then(()=>{b(ct(h))}))}function Y(h){const b=h.organizations.getIn(["pages",a,"ids"]);return b==null?void 0:b.map(V=>L(h,V))}function at(h){return h.organizations.getIn(["pages",a,"isFetching"])}function $(h,b){return h.organizations.getIn(["entities",b,"isFetching"])}function x(h,b){var V;return(V=h.organizationSaml)==null?void 0:V.getIn(["entities",b,"entities"])}function rt(h,b){return h.organizations.getIn(["entities",b,"error"])}function L(h,b){var V,k;let g=(V=h.organizations)==null?void 0:V.getIn(["entities",b]);if(g!=null&&g.get("error"))return null;if(g){const N=g.get("id");g=g.merge({accounts:(k=(0,O.L3)(h))==null?void 0:k.filter(X=>X.get("organization_id")===N)})}return g}function B(h,b){return Y(h).find(k=>k.get("id")===b)}function tt(h,b){var V;const k=(V=h.organizationAccounts)==null?void 0:V.getIn(["pages",b]),g=k==null?void 0:k.get("ids");return!g||!(g!=null&&g.size)?null:g&&g.map(N=>h.organizationAccounts.getIn(["entities",N]))}function q(h,b){return h.organizationAccounts.getIn(["pages",b,"isFetching"])}function ut(h,b){var V;const k=(V=h.organizationInvoices)==null?void 0:V.getIn(["pages",b]),g=k==null?void 0:k.get("ids");return!g||!(g!=null&&g.size)?null:g&&g.map(N=>{var X;return(X=h.organizationInvoices)==null?void 0:X.getIn(["entities",N])})}function y(h,b){var V;return(V=h.organizationInvoices)==null?void 0:V.getIn(["pages",b,"isFetching"])}function Z(h,b){var V;const k=(V=h.organizationReceipts)==null?void 0:V.getIn(["pages",b]),g=k==null?void 0:k.get("ids");return!g||!(g!=null&&g.size)?null:g&&g.map(N=>{var X;return(X=h.organizationReceipts)==null?void 0:X.getIn(["entities",N])})}function Q(h,b){var V;return(V=h.organizationReceipts)==null?void 0:V.getIn(["pages",b,"isFetching"])}function et(h,b){const V=tt(h,b);return V==null?void 0:V.reduce((g,N)=>(g.bandwidth.value+=N.getIn(["bandwidth_usage","used"])||0,g.bandwidth.limit+=N.getIn(["bandwidth_usage","included"])||0,g.buildMinutes.value+=N.getIn(["build_status","minutes","current"])||0,g.buildMinutes.limit+=N.getIn(["build_status","minutes","included_minutes_with_packs"])||0,g.concurrentBuilds.value+=N.getIn(["build_status","active"])||0,g.concurrentBuilds.limit+=N.get("included_concurrent_builds")||0,g.members+=N.get("used_seats")||0,g),{bandwidth:{value:0,limit:0},buildMinutes:{value:0,limit:0},concurrentBuilds:{value:0,limit:0},members:0})}function st(h,b){const V=h.get("id"),k=h.get("slug");return(0,S.p5)((g,N,X)=>X.updateOrganization(V,b).then(({data:St})=>{const{logo:gt}=b;gt!==void 0?X.updateOrganizationLogo(V,gt).catch(Ot=>new T.Z(Ot)):X.deleteOrganizationLogo(V).catch(Ot=>new T.Z(Ot)),g(s.organizationSuccess(St));const{slug:Dt}=St;Dt!==k&&g(v(Dt)).then(()=>{g((0,E.Ee)(document.location.pathname.replace(`/organizations/${k}/`,`/organizations/${Dt}/`))),g(j())})}))}function mt(h,b){const V=h.get("id");return(0,S.p5)((k,g,N)=>N.updateOrganizationPaymentMethod(V,b.toJS()).then(({data:X})=>(k(p.Nw.paymentMethodSuccess(X)),k((0,p.kC)(X.id)),(0,m.fromJS)(X)),X=>(F().notify(X,St=>{St.context="organizations \uFE65 updateOrganizationPaymentMethod"}),Promise.reject(X))))}function pt(h){return(0,S.p5)((b,V,k)=>k.deleteOrganizationLogo(h.get("id")).then(()=>{b(v(h.get("slug")))}).catch(g=>new T.Z(g)))}},74092:(_t,z,t)=>{t.d(z,{BX:()=>d,DY:()=>n,Nw:()=>p,X_:()=>E,id:()=>e,kC:()=>r,nS:()=>c});var l=t(5780),F=t.n(l),m=t(90046),P=t.n(m),D=t(24761),T=t(10583),O=t(2799),S=t(25556);const p=(0,D.P)("paymentMethods"),E=(0,D.x)("paymentMethods",p);function a(o){return(0,S.nY)(o)==="zuora"&&o?o.get("id"):"user"}function s(o){return(0,O.p5)((i,u,_)=>{const f=a(o),v=(0,S.oF)(u(),o);return i(p.paymentMethodsRequest(f)),_.paymentMethods(v).then(K=>i(p.paymentMethodsSuccess(f,K.data,K.pagination)))})}function r(o){return(0,O.p5)((i,u,_)=>o?_.paymentMethod(o).then(f=>i(p.paymentMethodSuccess(f.data))):Promise.resolve())}function c(o){return r(o&&o.get("payment_method_id"))}function d(o,i){return(0,O.p5)((u,_,f)=>f.savePaymentMethod(o.toJS()).then(v=>(u(p.paymentMethodSuccess(v.data)),u(s(i)),u((0,T.vP)()),(0,m.fromJS)(v.data)),v=>(F().notify(v,K=>{K.context="paymentMethods \uFE65 savePaymentMethod"}),Promise.reject(v))))}function n(o,i){const u=i&&i.get("payment_method_id");return o.paymentMethods.getIn(["entities",u])}function e(o,i){return o.paymentMethods.getIn(["entities",i])}},96764:(_t,z,t)=>{t.d(z,{D8:()=>s,E8:()=>f,GV:()=>a,Gr:()=>c,QK:()=>e,TT:()=>U,WF:()=>u,bl:()=>n,f6:()=>i,iQ:()=>_});var l=t(90046),F=t.n(l),m=t(18643),P=t(24761),D=t(93967),T=t(2799),O=t(61712);const S="list-v2",p={NODE_ENV:"production",VERSION_ID:"639cf6ef13ed8d000aa5c7a8",SITE_ID:"5f9562c1-be9c-4898-bc6a-5b40de4e1450",CONTEXT:"production",LAUNCHDARKLY_CLIENT_ID:"5e42e94d6bd2ec08061adf53",SIFT_BEACON_KEY:"0593578a91",DISABLE_DATADOG_RUM:!1,DATADOG_RUM_APP_ID:"abb8711a-ca04-44e2-bbd6-df0e07a7f3f8",DATADOG_RUM_CLIENT_TOKEN:"pubd771a23f8cb1e4f45f24b5fd37e11a96",DATADOG_RUM_APP_NAME:"netlify-react-ui",MOCK_API:void 0,REACT_APP_QUIET:void 0,APP_ENV:"prod",NETLIFY_API_BASE:void 0,ACTION_CABLE_URL:"wss://cablecar.services.netlify.com/cable",BUILD_UTC_TIME:1671231270020}.PLUGINS_URL_OVERRIDE||`https://${S}--netlify-plugins.netlify.app/plugins.json`,E="DEACTIVATED",a="PLUGIN_INSTALL",s=(0,m.Z)(a,(M,W,j)=>({pluginName:M,siteName:W,status:j})),r=(0,P.P)("plugins"),c=(0,P.x)("plugins",r,{key:"package"}),d=M=>{var W;const j=(W=M.compatibility)==null?void 0:W.filter(ct=>!ct.featureFlag);return{...M,compatibility:j!=null&&j.length?j:null}},n=()=>M=>(M(r.pluginsRequest("plugins")),fetch(p).then(W=>{if(!W.ok){const{status:j,statusText:ct}=W;throw new D.Z({status:j,statusText:ct,message:"Error fetching plugins"})}return W.json()}).then(W=>{const j=W.map(d);return M(r.pluginsSuccess("plugins",j))}).catch(W=>M(r.pluginsFailure("plugins",W))));function e(M,W,j,ct=!0){const ot=j||[];ot.push({package:W});const Et={plugins:ot};return(0,T.p5)((Y,at,$)=>$.updateSite(M.get("id"),Et).then(x=>{Y(s(W,M.get("name"),"success")),Y(O.Nw.siteSuccess(x.data))}).catch(x=>(Y(s(W,M.get("name"),"failure")),Promise.reject(new D.Z(x)))))}const o=M=>M.get("status")!==E;function i(M){const W=M.plugins.get("entities");return W==null?void 0:W.filter(o)}function u(M){return M.plugins.getIn(["pages","plugins","isFetching"])}function _(M){return M.plugins.getIn(["pages","plugins","error"])}function f(M,W){return M.plugins.get("entities").find(j=>j&&j.get("package")===W&&j.get("status")!==E)}const v=M=>W=>{const j=M.get(W.get("package"));return(j==null?void 0:j.merge(W))||W},K=(M,W)=>(M==null?void 0:M.get("name"))>(W==null?void 0:W.get("name"))?1:-1,U=(M,W)=>{const j=M.plugins.get("entities");return(W==null?void 0:W.map(v(j)).sort(K))||(0,l.List)()}},13160:(_t,z,t)=>{t.d(z,{B$:()=>ct,GY:()=>K,I0:()=>U,Pk:()=>r,Qg:()=>e,Wo:()=>ot,Wq:()=>p,en:()=>W,pd:()=>s,vD:()=>n,vb:()=>v,yW:()=>j});var l=t(5780),F=t.n(l),m=t(18643),P=t(24761),D=t(81073),T=t(93967),O=t(87883);const S="REPO_LINK_REQUEST",p="REPO_LINK_SUCCESS",E="REPO_LINK_FAILURE",a=(0,P.P)("repos"),s=(0,m.Z)(S,Y=>Y),r=(0,m.Z)(p,Y=>Y),c=(0,m.Z)(E,(Y,at)=>({full_name:Y,error:at})),d=25;function n({organization:Y,hideGitUser:at,page:$,per_page:x=d,installationId:rt}){return(0,O.$_)((L,B,tt)=>{if(at&&!Y)return Promise.resolve();const q=B(),ut=(0,O.z8)(q),y=(0,O.Lb)(q),Z=y?tt.searchRepos:tt.repos;return L(a.reposRequest(Y)),Z.call(tt,{search:y,organization:Y,page:$,per_page:x,installationId:rt,gitUser:ut}).then(Q=>L(a.reposSuccess(Y,Q.data,Q.pagination))).catch(Q=>{var et;const st=(et=tt==null?void 0:tt.checkErrorForInvalidToken)==null?void 0:et.call(tt,Q);if(st)throw new T.Z(st)})})}function e(Y,at){const $=Y.get("api_id"),x=Y.get("full_name"),rt=Y.get("organization_name");return(0,O.$_)((L,B,tt)=>tt.branches({api_id:$,organization_name:rt,page:at}).then(({data:q,pagination:ut})=>{L(a.repoSuccess({full_name:x,branches:Y.get("branches").push(...q),branchPagination:ut}))}))}const o=async({repoFiles:Y,git:at,repoDetails:$,baseDir:x})=>{const L=Y.filter(B=>(B=B.replace(x,""),D.yl.includes(B))).map(async B=>{try{const tt=await at.read({...$,filepath:B});return[B,tt.data]}catch(tt){throw new Error((tt==null?void 0:tt.message)||tt)}});return Promise.all(L).then(B=>B.reduce((tt,[q,ut])=>(q=q.replace(x,""),{...tt,[q]:ut}),{}))},i=async({git:Y,repoDetails:at,baseDir:$})=>{try{return(await Y.dir({...at,filepath:$})).data.map(({path:rt})=>rt)}catch(x){throw new Error((x==null?void 0:x.message)||x)}},u=async({git:Y,repoDetails:at,baseDir:$})=>await i({git:Y,repoDetails:at,baseDir:$}),_=Y=>Y?Y.at(-1)==="/"?Y:`${Y}/`:"",f=async({git:Y,api_id:at,branch:$,full_name:x,baseDir:rt,cloningRepo:L=!1,organization_name:B})=>{const tt={organization_name:B,api_id:at,full_name:x,branch:$};try{const q=await u({git:Y,repoDetails:tt,baseDir:rt}),ut=await o({repoFiles:q,git:Y,repoDetails:tt,baseDir:_(rt)}),{settings:y,warning:Z}=await(0,D.ZP)(q,ut,L);return{settings:y,warning:Z}}catch(q){return F().notify(q,ut=>{ut.context="heuristicsForRepoSettings",ut.addMetadata("repo",{name:x,branch:$,provider:Y==null?void 0:Y.provider}),ut.severity="info"}),{settings:{}}}};function v(Y){const at=Y.get("api_id"),$=Y.get("full_name"),x=Y.get("default_branch"),rt=Y.get("organization_name");return(0,O.$_)((L,B,tt)=>tt.branches({api_id:at,organization_name:rt}).then(({data:q,pagination:ut})=>f({git:tt,api_id:at,branch:x,full_name:$,organization_name:rt,baseDir:""}).then(y=>L(a.repoSuccess({full_name:$,branches:q,branchPagination:ut,...y})))).catch(q=>{F().notify(q,ut=>{ut.context="prepareRepo",ut.addMetadata("repo",{name:$,branch:x,provider:tt==null?void 0:tt.provider}),ut.severity="info"}),L(a.repoFailure($,new T.Z(`We couldn\u2019t access the repository ${$}. This could be because the repository is empty or disabled.`)))}))}function K(Y,at){return(at?x=>(0,O.Fq)(at,x):O.$_)((x,rt,L)=>(x(a.repoRequest(Y)),L.repo(Y).then(({data:B})=>f({git:L,api_id:B.api_id,branch:B.default_branch,full_name:Y,cloningRepo:!0,organization_name:B.organization_name,baseDir:""}).then(tt=>x(a.repoSuccess({...B,...tt})))).catch(B=>{const tt=new T.Z(B);throw x(a.repoFailure(Y,tt)),tt})))}function U(Y,at,$="",x){const rt=Y.get("api_id"),L=Y.get("full_name"),B=Y.get("organization_name");return(x?q=>(0,O.Fq)(x,q):O.$_)((q,ut,y)=>f({git:y,api_id:rt,branch:at,full_name:L,organization_name:B,baseDir:$}).then(Z=>q(a.repoSuccess({full_name:L,...Z}))).catch(Z=>q(a.repoFailure(L,new T.Z(`We couldn\u2019t access the branch ${at} on repository ${L}. This could be because some files have format errors.`)))))}function M(Y,at){switch(at.type){case S:return Y.set("linking",!0).setIn(["entities",at.payload,"linking"],!0);case E:return Y.set("linking_error",at.payload.error).setIn(["entities",at.payload.api_id,"link_error"],a.payload.error);case p:return Y.set("linking",null).setIn(["entities",at.payload,"linking"],null);default:return null}}const W=(0,P.x)("repos",a,{key:"full_name",handler:M});function j(Y,at){const $=Y.repos.getIn(["pages",at,"ids"]);return $&&$.map(x=>ot(Y,x))}function ct(Y,at){return Y.repos.getIn(["pages",at])}function ot(Y,at){return Y.repos.getIn(["entities",at])}function Et(Y,at){return Y.repos.getIn(["entities",at,"isFetching"])}},48534:(_t,z,t)=>{t.d(z,{SE:()=>p,XK:()=>S,Zz:()=>E,e7:()=>d,jW:()=>r,rB:()=>O});var l=t(76352),F=t(73274),m=t(10583),P=t(2799),D=t(4310),T=t(43455);const O="next";function S({account:n,url:e,data:o}){const i=n.get("slug");return(0,P.p5)((u,_,f)=>f.updateSamlConfig(i,e,o).then(v=>u((0,m.Mx)(i))))}function p(n){const e=n.get("slug");return(0,P.p5)((o,i,u)=>u.deleteSamlConfig(e).then(_=>o((0,m.Mx)(e))))}function E(n,e){return(0,P.p5)((o,i,u)=>u.getSamlStartUrl(n).then(_=>{const f=new URL(_.data.sp_start_url);f.searchParams.append("redirect",window.location.origin),f.searchParams.append("tracking_session_id",e),document.location=f.href}))}function a({user:n,slug:e}){return(0,P.p5)((o,i,u)=>u.user().then(_=>{n={..._.data,...n};const f=e?`/teams/${e}`:"/";o({type:D.Wb}),o((0,D.pH)(n)),o((0,T.Ee)(f))}))}function s({user:n,slug:e,redirect:o}){return(0,P.p5)((i,u,_)=>_.user().then(f=>{n={...f.data,...n},i({type:D.Wb}),i((0,D.pH)(n)),i((0,T.Ee)(o))}))}function r({token:n,slug:e}){return async(o,i)=>{window.location.hash="";const u={access_token:n};await(0,F.sV)({access_token:u.access_token});const _=(0,l.St)(O);(0,l.lD)(O),_&&(0,D.Bh)(_)?o(s({user:u,slug:e,redirect:_})):o(a({user:u,slug:e}))}}function c({user:n,saml_slug:e}){return(0,P.p5)((o,i,u)=>u.user().then(_=>{n={..._.data,...n};const f=e?`/teams/${e}`:"/";o({type:D.Wb}),o((0,D.pH)(n)),o((0,T.Ee)(f))}))}function d({access_token:n,saml_slug:e}){return async(o,i)=>{window.location.hash="";const u={access_token:n};await(0,F.sV)({access_token:u.access_token}),o((0,D.pH)(u)),o(c({user:u,saml_slug:e}))}}},80826:(_t,z,t)=>{t.d(z,{$b:()=>T,wT:()=>O});var l=t(93967),F=t(10583),m=t(2799),P=t(61712);const D=(S,p)=>{const E=[],a={instance_url:{gitlab_self_managed:"There is a problem with your instance URL; please review it.",github_enterprise:"There is a problem with your instance URL; please review it."},app_id:{github_enterprise:"Your app ID and/or private key are incorrect; please review them."},pem_file:{github_enterprise:"Your app ID and/or private key are incorrect; please review them."},client_id:{gitlab_self_managed:"Your app ID is incorrect; please review it.",github_enterprise:"Your client ID is incorrect; please review it."},client_secret:{gitlab_self_managed:"Your secret is incorrect; please review it.",github_enterprise:"Your client secret is incorrect; please review it."},webhook_secret:{github_enterprise:"Your webhook secret is incorrect; please review it."}};for(const s of Object.keys(S))a[s]&&E.push(a[s][p]);return E.length?E.length===1?`**Connection failed.** ${E[0]}`:`**Connection failed:** 

* `+E.join(`
* `):S},T=(S,p,E)=>{const a=S.get("id"),s=S.get("slug");return(0,m.p5)((r,c,d)=>d.updateSelfHostedGitConfig(a,p,E).then(({data:n})=>{r((0,F.Mx)(s)),r((0,P.KZ)({accountSlug:s}))}).catch(n=>{const e=D(n,E);throw new l.Z(e)}))},O=(S,p)=>{const E=S.get("id"),a=S.get("slug");return(0,m.p5)((s,r,c)=>c.deleteSelfHostedGitConfig(E,p).then(({data:d})=>{s((0,F.Mx)(a)),s((0,P.KZ)({accountSlug:a}))}).catch(d=>{throw new l.Z(d)}))}},21759:(_t,z,t)=>{t.d(z,{G6:()=>r,M2:()=>a,Pg:()=>d,RA:()=>i,k3:()=>e,k4:()=>c,uZ:()=>p,wo:()=>n});var l=t(24761),F=t(73274),m=t(2799),P=t(4310),D=t(7900),T=t(53478),O=t(61712);const S=(0,l.P)("services"),p=(0,l.x)("services",S);function E(u,_){return u.services.getIn(["entities",_])}function a(u,_){const f=u.services.getIn(["pages",_.get("id"),"ids"]);return f&&f.map(v=>E(u,v))}function s(u){return u.get("service_path").replace("/.netlify/","")}function r(u,_,f={}){return(0,m.p5)((v,K,U)=>U.createService(u.get("id"),_,f).then(M=>S.serviceSuccess(M.data)).then(()=>v(c(u))))}function c(u){const _=u.get("id");return(0,m.p5)((f,v,K)=>K.services(_).then(U=>f(S.servicesSuccess(_,U.data))))}function d(u,_,f){return(0,m.p5)((v,K,U)=>U.updateService(u.get("id"),s(_),_.get("id"),{config:f}).then(()=>v(c(u))))}function n(u,_){return(0,m.p5)((f,v,K)=>K.deleteService(u.get("id"),s(_),_.get("id")).then(()=>f(c(u))))}function e(u,_){return(0,m.vd)((f,v,K,U)=>{switch(_){case"cms":return Promise.all([f((0,T.XD)(u,{disable_signup:!0})),f(r(u,"git",{[U.provider]:{access_token:U.token,repo:u.getIn(["build_settings","repo_url"]).replace(/^https:\/\/[^/]+\//,"")}}))]).then(M=>f(o(u)));case"fauna":return f(r(u,"fauna",{}));case"nimbella":return f(r(u,"nimbella",{}));default:return Promise.resolve()}})}function o(u){return(_,f)=>{const v=f(),K=(0,P.HF)(v),U={email:K.get("email"),data:{full_name:K.get("full_name")}};return u=(0,O.lH)(v,u.get("name")),_((0,T.cG)(u,[U]))}}function i(u,_){return(0,m.p5)((f,v,K)=>{const U=v(),M=(0,D.Ji)(U),W=(0,D.vv)(U),j=new F.ZP({site_id:M,base_url:W});return new Promise((ct,ot)=>j.authenticate({provider:u,scope:_},(Et,Y)=>{Et?ot(Et):ct(Y.token)}))})}},61712:(_t,z,t)=>{t.d(z,{CJ:()=>jt,CX:()=>xt,Cu:()=>Zt,EQ:()=>gt,Er:()=>Jt,G$:()=>ae,GQ:()=>de,Go:()=>q,IS:()=>H,KZ:()=>J,L3:()=>dt,LR:()=>Et,LZ:()=>ot,Mo:()=>Ot,Nw:()=>B,OK:()=>Pe,Pr:()=>qt,UJ:()=>ie,UQ:()=>G,Un:()=>De,VI:()=>pt,WV:()=>vt,ZO:()=>Yt,Z_:()=>ft,aO:()=>Dt,c7:()=>Bt,eZ:()=>Y,f:()=>ct,gG:()=>Se,hK:()=>Ie,iG:()=>wt,lH:()=>Vt,mV:()=>se,mY:()=>ce,mh:()=>ge,n:()=>fe,rC:()=>ue,tI:()=>le,tc:()=>Ee,u:()=>pe,wM:()=>I,xb:()=>Lt});var l=t(90046),F=t.n(l),m=t(19271),P=t(18643),D=t(14938),T=t.n(D),O=t(24761),S=t(76352),p=t(29861),E=t(62807),a=t(43971),s=t(93967),r=t(2799),c=t(4310),d=t(27196),n=t(88688),e=t(69969),o=t(87883),i=t(13160),u=t(21759),_=t(43455);const f="BRANCHES_SUCCESS",v="DEPLOY_KEY_SUCCESS",K="DNS_ZONE_SUCCESS",U="SITE_CREATED",M="SITES_CLEAR_PAGES",W="SNIPPETS_REQUEST",j="SNIPPETS_SUCCESS",ct="DEPLOY_DONE",ot="DEPLOY_ERROR",Et="DIRECT_DEPLOY_LANDING",Y="DIRECT_DEPLOY_SUCCESS",at="SUBSCRIPTION_CANCELED",$="USAGE_RECORDS_SUCCESS",x="USAGE_RECORD_SUCCESS",rt="APP_INSTALL_SUCCESS",L="DNS_CONFIG_CHECKED",B=(0,O.P)("sites"),tt=(0,P.Z)(U,A=>A),q=(0,P.Z)(M),ut=(0,P.Z)(W,A=>A),y=(0,P.Z)(j,(A,R)=>({name:A,snippets:R})),Z=(0,P.Z)(f,(A,R)=>({name:A,branches:R})),Q=(0,P.Z)(K,(A,R)=>({name:A,dnsZone:R})),et=(0,P.Z)(v,(A,R)=>({name:A,deployKey:R})),st=(0,P.Z)(ct),mt=(0,P.Z)(ot,A=>A),pt=(0,P.Z)(Et,()=>{}),h=(0,P.Z)(Y,A=>A),b=(0,P.Z)(at,A=>A),V=(0,P.Z)($,(A,R)=>({name:A,records:R})),k=(0,P.Z)(x,(A,R)=>({name:A,record:R})),g=(0,P.Z)(rt,(A,R)=>({name:A,installationId:R})),N=(0,P.Z)(L,(A,R)=>({name:A,dnsVerified:R})),X=5,St=(0,l.fromJS)({isFetching:!0});function gt(A){return(0,r.p5)((R,w,nt)=>(R(B.siteRequest(A)),nt.site(A).then(it=>R(B.siteSuccess(it.data))).catch(it=>R(B.siteFailure(A,it))).then(it=>Vt(w(),A))))}function Dt(A,R){return(w,nt)=>fetch(`/.netlify/functions/verify?domain=${R}`).then(it=>it.json().then(Pt=>{if(!it.ok)throw new s.Z(Pt.error||"Error fetching DNS config");return Pt})).then(it=>{const Pt={glo:"global",global:"global",packet:"packet",pkt:"packet",reg:"regular",regular:"regular"},It=it.results.map(Tt=>Tt.cdnTier),Ct=A.getIn(["capabilities","cdn_tier"]);Ct==="custom"?w(N(A.get("name"),"custom")):It.every(Tt=>["global","regular","packet"].includes(Tt))&&(It.every(Tt=>Tt===Pt[Ct]||Tt==="packet")?w(N(A.get("name"),"success")):w(N(A.get("name"),"failed")))}).catch(it=>console.error("Error while checkDNSconfig:",it))}function Ot(A){return(0,r.p5)((R,w,nt)=>nt.siteById(A).then(it=>R(B.siteSuccess(it.data))))}function vt(A){return(0,r.p5)((R,w,nt)=>nt.branches(A.get("id")).then(it=>(R(Z(A.get("name"),it.data)),te(w(),A.get("name")))).catch(it=>it&&it.code===401?(R(Z(A.get("name"),[])),te(w(),A.get("name"))):Promise.reject(it)))}const Mt=({customApexDomain:A,customSubdomain:R,allDnsZones:w})=>{const nt=(R==null?void 0:R.split("."))||[],it=[];return nt.forEach((Pt,It)=>{if(It===nt.length-1)it.push(`${Pt}.${A}`);else{const Ct=nt.slice(It+1);it.push(`${Pt}.${Ct.join(".")}.${A}`)}}),it.push(A),Rt(it,w)};function Rt(A,R){if(A.length===0||R.length===0)return;const w=R.find(nt=>nt.name===A[0]);return w||(A.shift(),Rt(A,R))}function wt(A,R){const w=A.get("custom_domain"),nt=R&&R.get("slug")||null;return(0,r.p5)((it,Pt,It)=>(0,a.hh)(w).then(Ct=>It.dnsZones(nt).then(({data:Tt})=>{const yt=Mt({customApexDomain:`${Ct==null?void 0:Ct.domain}.${Ct==null?void 0:Ct.tld}`,customSubdomain:Ct==null?void 0:Ct.subdomain,allDnsZones:Tt});yt?(it(Q(A.get("name"),yt)),it((0,n.pZ)(yt.name))):it(Q(A.get("name"),{name:w,error:"DNS zone not found"}))})))}function xt(A,R){const w=R.get("dns_zone");return w==null?void 0:w.set("records",(0,n.od)(A,w.get("name")))}function Yt(A){return(0,r.p5)((R,w,nt)=>nt.siteUsage(A.get("id")).then(it=>R(V(A.get("name"),it.data))))}function Bt(A,{id:R,plan:w}){return(0,r.p5)((nt,it,Pt)=>Pt.changeAddonPlan(R,w).then(It=>nt(k(A.get("name"),It.data))))}function Zt(A){return(0,r.p5)((R,w,nt)=>nt.siteSnippets(A.get("id")).then(it=>R(y(A.get("name"),it.data))))}function G(A,R){return(0,r.p5)((w,nt,it)=>it.siteSnippetRemove(A.get("id"),R.get("id")).then(Pt=>w(Zt(A))))}function H(A,R){return(0,r.p5)((w,nt,it)=>it.siteSnippetAdd(A.get("id"),R).then(Pt=>w(Zt(A))))}function I(A){return(0,r.p5)((R,w,nt)=>{const it=Vt(w(),A);if(!it||it.get("screenshot_fetching")||it.get("isFetching"))return;R(B.siteSuccess({name:A,screenshot_fetching:!0}));let Pt=0;const It=()=>(Pt++,new Promise((Ct,Tt)=>{nt.site(A).then(yt=>{yt.data.screenshot_url?Ct(R(B.siteSuccess(yt.data))):Pt<=5&&setTimeout(It,1e3)})}));return It()})}function C(A={}){return`sites-${A.accountSlug}${A.searchTerm?`-${A.searchTerm}`:""}`}function J(A){const R=C(A);return(0,r.p5)((w,nt,it)=>(w(B.sitesRequest(R)),it.sites(A).then(Pt=>w(B.sitesSuccess(R,Pt.data,Pt.pagination)))))}async function lt(A,R={},w){return Object.keys(R).length>0&&A.use_envelope&&await w.createEnvVarsForEnvelope({accountId:A.account_slug,siteId:A.id,envVars:(0,E.SY)(R)}),A}function dt(A,R){const w=A.get("name");return(0,r.p5)((nt,it,Pt)=>Pt.updateSite(A.get("id"),R).then(It=>{if(nt(q()),It.data.use_envelope||(It.data.use_envelope=!1),nt(B.siteSuccess(It.data)),It.data.name!==w){const Ct=window.location.pathname.replace(`/sites/${w}/`,`/sites/${It.data.name}/`);nt((0,_.Ee)(Ct))}return Vt(it(),w)}))}function ft(A){return(0,r.p5)((R,w,nt)=>nt.unlinkSiteRepository(A).then(it=>(R(q()),R(B.siteSuccess(it.data)))))}function Lt(A){return(0,r.p5)((R,w,nt)=>nt.deleteSite(A.get("id")).then(it=>{R(q()),R((0,m.VF)("/"))}))}function Nt(A){return(0,r.p5)((R,w,nt)=>(0,o.$_)((it,Pt,It)=>A(R,w,nt,It))(R,w))}const ht=A=>{var R;const w=(R=A.getIn(["settings","plugins"]))==null?void 0:R.toJS();return w!=null&&w.length?w:[]},Kt=A=>!(p.CB[A]===p.CB.azure_devops||p.CB[A]===p.CB.gitlab||p.CB[A]===p.CB.gitlab_self_hosted||p.CB[A]===p.CB.gitlab_self_managed);function Jt(A,R,w,nt=""){const it=R.get("api_id"),Pt=R.get("full_name"),It=R.get("full_name_encoded"),Ct=R.get("private"),Tt=R.get("installation_id"),yt=R.get("owner_type"),Wt=w.account_slug,$t=R.get("project_id"),zt=R.get("organization_name");return Nt((Gt,Ht,Ft,At)=>{const bt=At.provider===p.CB.github_app?p.CB.github:At.provider,ee=Ht().git,ne=p.CB[bt]===p.CB.azure_devops,Oe=p.CB[bt]===p.CB.gitlab||p.CB[bt]===p.CB.gitlab_self_hosted||p.CB[bt]===p.CB.gitlab_self_managed,he=Kt(bt),Qt={provider:bt,installation_id:Tt,id:R.get("id"),owner_type:yt,repo:It||Pt,private:Ct,...w};ne&&(Qt.azure_refresh_token=ee.get("refreshAccessToken")),Oe&&(Qt.gitlab_refresh_token=ee.get("refreshAccessToken")),delete Qt.account_slug;const Ae=A?Ut=>Ft.updateSite(A.get("id"),Ut):Ut=>Ft.createSite({account_slug:Wt,...Ut,created_via:nt});return Gt((0,i.pd)(Pt)),(Tt||ne?Promise.resolve():Ft.createDeployKey().then(Ut=>At.addDeployKey(it,Ut.data,!0)).catch(Ut=>{var kt;const re=(kt=At==null?void 0:At.checkErrorForInvalidToken)==null?void 0:kt.call(At,Ut);throw re?new s.Z(re):new s.Z("We couldn\u2019t set up continuous deployment for this repository. This typically happens when you don\u2019t have admin rights to the repository.")})).then(Ut=>Ae({repo:{...Qt,deploy_key_id:Ut&&Ut.id},...he&&{default_hooks_data:Tt?{}:{access_token:At.token}},plugins:ht(R)})).then(Ut=>At.addWebhook({api_id:it,site:Ut.data,organization_name:zt,project_id:$t})).then(async Ut=>await lt(Ut,Qt.env,Ft)).then(Ut=>Ft.deploys(Ut.id,{page:1,per_page:1}).then(kt=>(Gt((0,c.fq)()),Gt((0,i.Pk)(Pt)),Gt(q()),Gt(B.siteSuccess(Ut)),Gt(d.Nw.deploysSuccess(Ut.id,kt.data)),{site:Ut,deploy:kt.data[0]})))})}function jt(A){const R={};return A.forEach(w=>{R[w.path]=w.sha}),R}function oe(A){const R={};return A.forEach(w=>{R[w]=!0}),R}function qt(A,R,w,nt){const it=oe(R.required),Pt=T()(T().n(X),It=>A.uploadFile(R.deploy_id||R.id,It.path,It.content,nt));return Promise.all(w.map(It=>it[It.sha]&&Pt(It)).filter(Boolean))}function se(A,R,w=!1){const nt=A.get("id"),it=A.get("name"),Pt=jt(R);return(0,r.p5)((It,Ct,Tt)=>Tt.createDeploy(nt,{files:Pt}).then(yt=>{const Wt=yt.data;return It(d.Nw.deploysSuccess(nt,[Wt])),(0,S.D$)("dropSiteName",it),(0,S.D$)("dropDeployId",Wt==null?void 0:Wt.id),Wt}).then(yt=>qt(Tt,yt,R).then(()=>Tt.waitForDeploy(yt.id)).then(Wt=>Wt.data)).then(yt=>Tt.site(it).then(Wt=>{It(q()),It(B.siteSuccess(Wt.data)),It(d.Nw.deploysSuccess(nt,[yt]))}).then(Wt=>(w?(It(I(A.get("name"))),It((0,m.VF)(`/drop/${A.get("name")}`))):(It((0,m.VF)(`/sites/${it}`)),(0,e.Tu)()),Wt))))}function ie(A,R=""){return(0,r.p5)((w,nt,it)=>it.createSite({account_slug:A,created_via:R}).then(({data:Pt})=>(w(B.siteSuccess(Pt)),Vt(nt(),Pt.name))))}function ae(){return(0,r.p5)((A,R,w)=>w.createDeployKey().then(nt=>nt.data).catch(nt=>{throw new s.Z("Error generating a new deploy key.",nt)}))}function ue(A,R){return(0,r.p5)((w,nt,it)=>it.getDeployKey(A).then(Pt=>w(et(R.get("name"),Pt.data))).catch(Pt=>{throw new s.Z("Error getting the deploy key.",Pt)}))}function ce(A,R){const w=R.get("name");return A.sites.getIn(["entities",w]).get("deploy_key")||null}function le(A,R,w,nt,it=!1,Pt=""){const It=R.get("default_branch"),Ct={path:R.get("full_name"),slug:R.get("full_name").replace(/\//,"-"),authorized_url:`https://${R.get("provider")}.com/${R.get("full_name")}`,branch:It},Tt={name:w,private:it};return Nt((yt,Wt,$t,zt)=>{yt((0,i.pd)(w));const Gt=Kt(zt.provider);return $t.createTemplate(Ct).then(Ht=>Ht.data).then(Ht=>zt.createRepo(Tt).then(Ft=>$t.createDeployKey().then(At=>At.data).then(At=>zt.addDeployKey(Ft.full_name,At,!1)).then(At=>$t.createSite({account_slug:A,no_initial_build:!0,template_id:Ht.id,repo:{provider:zt.provider,branch:It,id:Ft.id,repo:Ft.full_name,deploy_key_id:At.id,...R.get("settings").toJS(),private:Ft.private},...Gt&&{default_hooks_data:{access_token:zt.token}},plugins:ht(R),created_via:Pt}).then(bt=>bt.data)).then(At=>zt.addWebhook({api_id:Ft.api_id,site:At})).then(async At=>{const bt=R.getIn(["settings","env"]).toJS();return await lt(At,bt,$t)}).then(At=>_e(At,R.getIn(["settings","template","incoming-hooks"])||[],$t)).then(At=>yt((0,u.k3)((0,l.fromJS)(At),nt)).then(bt=>At)).then(At=>$t.triggerDeploy(At.id,!1,Ht.id).then(bt=>At)).then(At=>{yt((0,i.Pk)(Ft.full_name)),yt(h(At)),yt(gt(At.name)),yt((0,_.Ee)(`/sites/${At.name}`))})))})}function de(A,R){return(0,r.p5)((w,nt,it)=>(w(B.siteRequest(A.get("name"))),it.transferSite(A.get("id"),R.get("id")).then(Pt=>(w(q()),w(B.siteSuccess(Pt.data))))))}function _e(A,R,w){return R.map(nt=>w.addBuildHook(A.id,{title:nt})),A}function ge(A,R){return(w,nt)=>w(g(A.get("name"),R))}const Ee=(0,O.x)("sites",B,{key:"name",handler:(A,R)=>{switch(R.type){case M:return A.delete("pages");case W:return A.setIn(["entities",R.payload,"snippets","isFetching"],!0);case j:return A.setIn(["entities",R.payload.name,"snippets"],(0,l.fromJS)(R.payload.snippets));case f:return A.setIn(["entities",R.payload.name,"branches"],(0,l.fromJS)(R.payload.branches));case v:return A.setIn(["entities",R.payload.name,"deploy_key"],R.payload.deployKey.public_key);case K:return A.setIn(["entities",R.payload.name,"dns_zone"],(0,l.fromJS)(R.payload.dnsZone));case at:return A.deleteIn(["entities",R.payload.getIn(["site","name"]),"paid_individual_site_subscription"]);case $:return A.setIn(["entities",R.payload.name,"plans"],(0,l.fromJS)(R.payload.records).reduce((w,nt)=>w.set(nt.get("type"),nt),(0,l.Map)()));case x:return A.updateIn(["entities",R.payload.name],w=>w.setIn(["plans",R.payload.record.type],(0,l.fromJS)(R.payload.record)));case L:return A.updateIn(["entities",R.payload.name],w=>w.set("dnsVerified",R.payload.dnsVerified));case rt:return A.setIn(["entities",R.payload.name,"build_settings","installation_id"],R.payload.installationId);default:return null}}});function Vt(A,R,w){const nt=A.sites.getIn(["entities",R]);return nt?nt&&nt.get&&nt.get("id")?nt:w?nt.get&&nt||St.set("name",R):null:null}function Se(A,R){return A.sites.get("entities").find(w=>w.get("id")===R)}function Xt(A,R){const w=Number(R.page)||1,nt=A.sites.getIn(["pages",C(R)]),it=(nt==null?void 0:nt.get("current"))||1;return!(nt!=null&&nt.get("isFetching"))&&it===w?nt:null}function pe(A,R){const w=Xt(A,R);return w==null?void 0:w.get("ids").map(nt=>Vt(A,nt))}function fe(A,R={}){const w=Xt(A,R);return w==null?void 0:w.get("isFetching")}function Pe(A,R={}){return Xt(A,R)}function me(A,R){return R&&R.get("branches")}function te(A,R){var w;return(w=Vt(A,R))==null?void 0:w.get("branches")}function De(A,R){const w=me(A,R),nt=R.getIn(["build_settings","repo_branch"]),it=w&&w.map(Pt=>Pt.get("name")).filter(Pt=>Pt!==nt);return it&&it.unshift(nt)}function Me(A){return A.sites.get("search")}const Ie=A=>R=>R(B.siteSuccess(A))},66764:(_t,z,t)=>{t.d(z,{Vt:()=>D});var l=t(24761),F=t(2799),m=t(61712);const P=(0,l.P)("subscriptions"),D=(0,l.x)("subscriptions",P);function T(s){return withApi((r,c,d)=>(r(P.subscriptionsRequest("subscriptions")),d.newSubscription(s).then(n=>r(P.subscriptionSuccess(n.data)))))}function O(s){return withApi((r,c,d)=>(r(P.subscriptionsRequest("subscriptions")),d.cancelSubscription(s.get("id")).then(()=>r(subscriptionCanceled(s)))))}function S(s,r){return withApi((c,d,n)=>{c(P.subscriptionsRequest("subscriptions"));const e={payment_method_id:r};return n.updateSubscription(s,e).then(o=>c(P.subscriptionSuccess(o.data)))})}function p(s){return withApi((r,c,d)=>(r(P.subscriptionsRequest("subscriptions")),d.getSubscriptions(s).then(n=>r(P.subscriptionsSuccess(s,n.data)),n=>r(P.subscriptionsFailure(s,n.message)))))}function E(s,r){const c=s.subscriptions.getIn(["entities"]);return c&&c.find(d=>a(d)&&d.get("type")==="site"&&d.get("site_id")===r)}function a(s){return s.get("state")==="active"||s.get("state")==="past_due"||s.get("zuora_migrated")&&!s.get("zuora_canceled")}},1579:(_t,z,t)=>{t.d(z,{IP:()=>P,K$:()=>O,XT:()=>E,iH:()=>T});var l=t(24761),F=t(2799);const m=(0,l.P)("teamAudits"),P=(0,l.x)("teamAudits",m);function D(a,s){return a.teamAudit.getIn(["entities",s])}function T(a,s){const r=a.teamAudit.getIn(["pages",p(s),"ids"]);return r&&r.map(c=>D(a,c))}function O(a,s){return a.teamAudit.getIn(["pages",p(s)])}function S(a,s){return a.teamAudit.getIn(["pages",p(s),"current"])}function p(a={}){return`${a.accountSlug}${a.search?`-${a.search}`:""}`}function E(a={}){return(0,F.p5)((s,r,c)=>c.teamAudit(a).then(d=>{s(m.teamAuditsSuccess(p(a),d.data,d.pagination))}))}},8860:(_t,z,t)=>{t.d(z,{$6:()=>E,KW:()=>c,Kg:()=>r,Rt:()=>d,cs:()=>S,dS:()=>p,dv:()=>a});var l=t(18643),F=t(24761),m=t(10583),P=t(2799);const D=(0,F.P)("teamShareableInvite"),T="TEAM_SHAREABLE_INVITE_SUCCESS",O=(0,l.Z)(T,(n,e)=>({id:n.get("id"),data:e})),S=(0,F.x)("teamShareableInvite",D,{handler:(n,e)=>{switch(e.type){case T:return n.set(e.payload.id,e.payload.data);default:return null}}});function p(n,e){return n.teamShareableInvite.get(e.get("id"))}function E(n){const e=n.get("slug");return(0,P.p5)((o,i,u)=>u.createShareableInvite(e).then(_=>o(a(n))))}function a(n){const e=n.get("slug");return(0,P.p5)((o,i,u)=>u.getShareableInvite(e).then(_=>{o(O(n,_.data))}))}function s(n){const e=n.get("slug");return withApi((o,i,u)=>u.updateShareableInvite(e).then(_=>o(a(n))))}function r(n){const e=n.get("slug");return(0,P.p5)((o,i,u)=>u.deleteShareableInvite(e))}function c(n){return(0,P.p5)((e,o,i)=>i.joinShareableInvite(n).then(u=>e((0,m.vP)())))}function d(n){const e=n.get("slug");try{return(0,P.p5)((o,i,u)=>u.checkShareableInvite(e).then(_=>(o(a(n)),{status:"200"})).catch(_=>({err:_})))}catch(o){console.error(o)}}},11632:(_t,z,t)=>{t.d(z,{GO:()=>m,IK:()=>F,Kq:()=>O,L9:()=>D,qX:()=>P});var l=t(18643);const F="TRACK",m="IDENTIFY",P="PAGE",D=(0,l.Z)(F,S=>S),T=(0,l.Z)(m,S=>S),O=(0,l.Z)(P,()=>({}))},13992:(_t,z,t)=>{t.d(z,{Dk:()=>r,Fz:()=>E,VO:()=>o,af:()=>n,m6:()=>e,rU:()=>S,vj:()=>d});var l=t(90046),F=t.n(l),m=t(18643),P=t(24761),D=t(2799);const T="TRAFFICSPLIT_TOGGLE",O=(0,P.P)("trafficSplits"),S=(0,P.x)("trafficSplits",O,{handler:(i,u)=>{switch(u.type){case"TRAFFICSPLIT_SUCCESS":return i.setIn(["entities",u.payload.id],(0,l.fromJS)(u.payload));case T:return i.setIn(["entities",u.payload.splitId,"active"],u.payload.active);default:return null}}});function p(i,u){return i.trafficSplits.getIn(["entities",u])}function E(i,u){const _=i.trafficSplits.getIn(["pages",s(u),"ids"]);return _&&_.map(f=>p(i,f))}const a=(0,m.Z)("TRAFFICSPLIT_TOGGLE",(i,u)=>({splitId:i,active:u}));function s(i){return i&&i.get("id")}function r(i){const u=s(i);return(0,D.p5)((_,f,v)=>v.trafficSplits(u).then(K=>_(O.trafficSplitsSuccess(u,K.data))))}function c(i,u){const _=s(i);return withApi((f,v,K)=>K.trafficSplit(_,u).then(U=>f(O.trafficSplitSuccess(U.data))))}function d(i,u){const _=s(i);return(0,D.p5)((f,v,K)=>K.createTrafficSplit(_,u).then(U=>{f(O.trafficSplitSuccess(U.data)),f(r(i))}))}function n(i,u,_){const f=s(i);return(0,D.p5)((v,K,U)=>U.updateTrafficSplit(f,u,_).then(M=>{v(O.trafficSplitSuccess(M.data))}))}function e(i,u){return(0,D.p5)((_,f,v)=>v.startTrafficSplit(s(i),u).then(K=>{_(a(u,!0)),_(r(i))}))}function o(i,u){return(0,D.p5)((_,f,v)=>v.stopTrafficSplit(s(i),u).then(K=>{_(a(u,!1)),_(r(i))}))}},38534:(_t,z,t)=>{t.d(z,{f:()=>l});var l=(F=>(F.all="all",F.nonProduction="non_production",F))(l||{})},43455:(_t,z,t)=>{t.d(z,{Ee:()=>E,FY:()=>d,K4:()=>n,Qf:()=>e,X_:()=>o,_P:()=>a,jS:()=>c,qC:()=>r,ui:()=>p});var l=t(90046),F=t.n(l),m=t(19271),P=t(11632);const D="SET_A11Y_MESSAGE",T="SET_LOADING",O="SET_ROUTE_PATH",S="SET_DISPLAY_GUIDED_ONBOARDING",p=(i=(0,l.Map)(),u)=>{switch(u.type){case D:return i.setIn(["ui","a11yMessage"],u.message);case T:return i.setIn(["ui","loading"],u.loading);case O:return i.setIn(["ui","routePath"],u.routePath);case S:return i.setIn(["ui","displayGuidedOnboarding"],u.displayGuidedOnboarding);default:return i}},E=i=>u=>{u((0,m.gx)(i)),u((0,P.Kq)())},a=({ui:i})=>i.getIn(["ui","a11yMessage"]),s=({ui:i})=>i.getIn(["ui","loading"]),r=({ui:i})=>i.getIn(["ui","routePath"]),c=({ui:i})=>i.getIn(["ui","displayGuidedOnboarding"]),d=i=>({type:D,message:i}),n=i=>({type:T,loading:i}),e=i=>({type:O,routePath:i}),o=i=>({type:S,displayGuidedOnboarding:i})},65928:(_t,z,t)=>{t.d(z,{q6:()=>T});var l=t(90046),F=t.n(l),m=t(18643);const P="UPLOAD_LOG",D=(0,m.Z)(P,(S,p)=>({deploy_id:S,log:p,ts:new Date().getTime()}));function T(S=(0,l.Map)(),p){switch(p.type){case P:{const{deploy_id:E,ts:a,log:s}=p.payload,r=S.get(E)||(0,l.List)();return S.setIn([E],r.push((0,l.Map)({ts:a,log:s})))}default:return S}}function O(S,p){return S.uploads.get(p)}}}]);
